<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="generator" content="Hugo 0.99.1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<link rel="preload" href="https://alamot.github.io/css/noncrit.css" as="style" onload="this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://alamot.github.io/css/noncrit.css"></noscript>
<style>
button{overflow:visible}button,select{text-transform:none}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}
*{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}:before,:after{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}
input,button,select,textarea{font-family:inherit;font-size:inherit;line-height:inherit}
.sr-only{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0}.sr-only-focusable:active,.sr-only-focusable:focus{position:static;width:auto;height:auto;margin:0;overflow:visible;clip:auto}
[role="button"]{cursor: pointer;}
.container{margin-right:auto;margin-left:auto;padding-left:15px;padding-right:15px}@media (min-width: 768px){.container{width:750px}}@media (min-width: 992px){.container{width:970px}}@media (min-width: 1200px){.container{width:1170px}}.container-fluid{margin-right:auto;margin-left:auto;padding-left:15px;padding-right:15px}.row{margin-left:-15px;margin-right:-15px}
.col-xs-1, .col-sm-1, .col-md-1, .col-lg-1, .col-xs-2, .col-sm-2, .col-md-2, .col-lg-2, .col-xs-3, .col-sm-3, .col-md-3, .col-lg-3, .col-xs-4, .col-sm-4, .col-md-4, .col-lg-4, .col-xs-5, .col-sm-5, .col-md-5, .col-lg-5, .col-xs-6, .col-sm-6, .col-md-6, .col-lg-6, .col-xs-7, .col-sm-7, .col-md-7, .col-lg-7, .col-xs-8, .col-sm-8, .col-md-8, .col-lg-8, .col-xs-9, .col-sm-9, .col-md-9, .col-lg-9, .col-xs-10, .col-sm-10, .col-md-10, .col-lg-10, .col-xs-11, .col-sm-11, .col-md-11, .col-lg-11, .col-xs-12, .col-sm-12, .col-md-12, .col-lg-12 { position: relative; min-height: 1px; padding-left: 15px; padding-right: 15px; }
@media (min-width: 768px){.col-sm-1,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-10,.col-sm-11,.col-sm-12{float:left}.col-sm-12{width:100%}.col-sm-11{width:91.66666667%}.col-sm-10{width:83.33333333%}.col-sm-9{width:75%}.col-sm-8{width:66.66666667%}.col-sm-7{width:58.33333333%}.col-sm-6{width:50%}.col-sm-5{width:41.66666667%}.col-sm-4{width:33.33333333%}.col-sm-3{width:25%}.col-sm-2{width:16.66666667%}.col-sm-1{width:8.33333333%}.col-sm-pull-12{right:100%}.col-sm-pull-11{right:91.66666667%}.col-sm-pull-10{right:83.33333333%}.col-sm-pull-9{right:75%}.col-sm-pull-8{right:66.66666667%}.col-sm-pull-7{right:58.33333333%}.col-sm-pull-6{right:50%}.col-sm-pull-5{right:41.66666667%}.col-sm-pull-4{right:33.33333333%}.col-sm-pull-3{right:25%}.col-sm-pull-2{right:16.66666667%}.col-sm-pull-1{right:8.33333333%}.col-sm-pull-0{right:auto}.col-sm-push-12{left:100%}.col-sm-push-11{left:91.66666667%}.col-sm-push-10{left:83.33333333%}.col-sm-push-9{left:75%}.col-sm-push-8{left:66.66666667%}.col-sm-push-7{left:58.33333333%}.col-sm-push-6{left:50%}.col-sm-push-5{left:41.66666667%}.col-sm-push-4{left:33.33333333%}.col-sm-push-3{left:25%}.col-sm-push-2{left:16.66666667%}.col-sm-push-1{left:8.33333333%}.col-sm-push-0{left:auto}.col-sm-offset-12{margin-left:100%}.col-sm-offset-11{margin-left:91.66666667%}.col-sm-offset-10{margin-left:83.33333333%}.col-sm-offset-9{margin-left:75%}.col-sm-offset-8{margin-left:66.66666667%}.col-sm-offset-7{margin-left:58.33333333%}.col-sm-offset-6{margin-left:50%}.col-sm-offset-5{margin-left:41.66666667%}.col-sm-offset-4{margin-left:33.33333333%}.col-sm-offset-3{margin-left:25%}.col-sm-offset-2{margin-left:16.66666667%}.col-sm-offset-1{margin-left:8.33333333%}.col-sm-offset-0{margin-left:0}}@media (min-width: 992px){.col-md-1,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-10,.col-md-11,.col-md-12{float:left}.col-md-12{width:100%}.col-md-11{width:91.66666667%}.col-md-10{width:83.33333333%}.col-md-9{width:75%}.col-md-8{width:66.66666667%}.col-md-7{width:58.33333333%}.col-md-6{width:50%}.col-md-5{width:41.66666667%}.col-md-4{width:33.33333333%}.col-md-3{width:25%}.col-md-2{width:16.66666667%}.col-md-1{width:8.33333333%}.col-md-pull-12{right:100%}.col-md-pull-11{right:91.66666667%}.col-md-pull-10{right:83.33333333%}.col-md-pull-9{right:75%}.col-md-pull-8{right:66.66666667%}.col-md-pull-7{right:58.33333333%}.col-md-pull-6{right:50%}.col-md-pull-5{right:41.66666667%}.col-md-pull-4{right:33.33333333%}.col-md-pull-3{right:25%}.col-md-pull-2{right:16.66666667%}.col-md-pull-1{right:8.33333333%}.col-md-pull-0{right:auto}.col-md-push-12{left:100%}.col-md-push-11{left:91.66666667%}.col-md-push-10{left:83.33333333%}.col-md-push-9{left:75%}.col-md-push-8{left:66.66666667%}.col-md-push-7{left:58.33333333%}.col-md-push-6{left:50%}.col-md-push-5{left:41.66666667%}.col-md-push-4{left:33.33333333%}.col-md-push-3{left:25%}.col-md-push-2{left:16.66666667%}.col-md-push-1{left:8.33333333%}.col-md-push-0{left:auto}.col-md-offset-12{margin-left:100%}.col-md-offset-11{margin-left:91.66666667%}.col-md-offset-10{margin-left:83.33333333%}.col-md-offset-9{margin-left:75%}.col-md-offset-8{margin-left:66.66666667%}.col-md-offset-7{margin-left:58.33333333%}.col-md-offset-6{margin-left:50%}.col-md-offset-5{margin-left:41.66666667%}.col-md-offset-4{margin-left:33.33333333%}.col-md-offset-3{margin-left:25%}.col-md-offset-2{margin-left:16.66666667%}.col-md-offset-1{margin-left:8.33333333%}.col-md-offset-0{margin-left:0}}
label { display: inline-block; max-width: 100%; margin-bottom: 5px; font-weight: bold; }
.btn{display:inline-block;margin-bottom:0;font-weight:400;text-align:center;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid transparent;white-space:nowrap;padding:6px 12px;font-size:16px;line-height:1.4;border-radius:4px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.btn:focus,.btn:active:focus,.btn.active:focus,.btn.focus,.btn:active.focus,.btn.active.focus{outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.btn:hover,.btn:focus,.btn.focus{color:#333;text-decoration:none}.btn:active,.btn.active{outline:0;background-image:none;-webkit-box-shadow:inset 0 3px 5px rgba(0,0,0,0.125);box-shadow:inset 0 3px 5px rgba(0,0,0,0.125)}.btn.disabled,.btn[disabled],fieldset[disabled] .btn{cursor:not-allowed;opacity:.65;filter:alpha(opacity=65);-webkit-box-shadow:none;box-shadow:none}a.btn.disabled,fieldset[disabled] a.btn{pointer-events:none}.btn-default{color:#333;background-color:#fff;border-color:#ccc}.btn-default:focus,.btn-default.focus{color:#333;background-color:#e6e6e6;border-color:#8c8c8c}.btn-default:hover{color:#333;background-color:#e6e6e6;border-color:#adadad}.btn-default:active,.btn-default.active,.open > .dropdown-toggle.btn-default{color:#333;background-color:#e6e6e6;border-color:#adadad}.btn-default:active:hover,.btn-default.active:hover,.open > .dropdown-toggle.btn-default:hover,.btn-default:active:focus,.btn-default.active:focus,.open > .dropdown-toggle.btn-default:focus,.btn-default:active.focus,.btn-default.active.focus,.open > .dropdown-toggle.btn-default.focus{color:#333;background-color:#d4d4d4;border-color:#8c8c8c}.btn-default:active,.btn-default.active,.open > .dropdown-toggle.btn-default{background-image:none}.btn-default.disabled:hover,.btn-default[disabled]:hover,fieldset[disabled] .btn-default:hover,.btn-default.disabled:focus,.btn-default[disabled]:focus,fieldset[disabled] .btn-default:focus,.btn-default.disabled.focus,.btn-default[disabled].focus,fieldset[disabled] .btn-default.focus{background-color:#fff;border-color:#ccc}.btn-default .badge{color:#fff;background-color:#333}.btn-primary{color:#fff;background-color:#195eff;border-color:#004cff}.btn-primary:focus,.btn-primary.focus{color:#fff;background-color:#0045e5;border-color:#00267f}.btn-primary:hover{color:#fff;background-color:#0045e5;border-color:#003ac1}.btn-primary:active,.btn-primary.active,.open > .dropdown-toggle.btn-primary{color:#fff;background-color:#0045e5;border-color:#003ac1}.btn-primary:active:hover,.btn-primary.active:hover,.open > .dropdown-toggle.btn-primary:hover,.btn-primary:active:focus,.btn-primary.active:focus,.open > .dropdown-toggle.btn-primary:focus,.btn-primary:active.focus,.btn-primary.active.focus,.open > .dropdown-toggle.btn-primary.focus{color:#fff;background-color:#003ac1;border-color:#00267f}.btn-primary:active,.btn-primary.active,.open > .dropdown-toggle.btn-primary{background-image:none}.btn-primary.disabled:hover,.btn-primary[disabled]:hover,fieldset[disabled] .btn-primary:hover,.btn-primary.disabled:focus,.btn-primary[disabled]:focus,fieldset[disabled] .btn-primary:focus,.btn-primary.disabled.focus,.btn-primary[disabled].focus,fieldset[disabled] .btn-primary.focus{background-color:#195eff;border-color:#004cff}.btn-primary .badge{color:#195eff;background-color:#fff}.btn-success{color:#fff;background-color:#00bc16;border-color:#00a313}.btn-success:focus,.btn-success.focus{color:#fff;background-color:#008910;border-color:#002304}.btn-success:hover{color:#fff;background-color:#008910;border-color:#00650c}.btn-success:active,.btn-success.active,.open > .dropdown-toggle.btn-success{color:#fff;background-color:#008910;border-color:#00650c}.btn-success:active:hover,.btn-success.active:hover,.open > .dropdown-toggle.btn-success:hover,.btn-success:active:focus,.btn-success.active:focus,.open > .dropdown-toggle.btn-success:focus,.btn-success:active.focus,.btn-success.active.focus,.open > .dropdown-toggle.btn-success.focus{color:#fff;background-color:#00650c;border-color:#002304}.btn-success:active,.btn-success.active,.open > .dropdown-toggle.btn-success{background-image:none}.btn-success.disabled:hover,.btn-success[disabled]:hover,fieldset[disabled] .btn-success:hover,.btn-success.disabled:focus,.btn-success[disabled]:focus,fieldset[disabled] .btn-success:focus,.btn-success.disabled.focus,.btn-success[disabled].focus,fieldset[disabled] .btn-success.focus{background-color:#00bc16;border-color:#00a313}.btn-success .badge{color:#00bc16;background-color:#fff}.btn-info{color:#fff;background-color:#5bc0de;border-color:#46b8da}.btn-info:focus,.btn-info.focus{color:#fff;background-color:#31b0d5;border-color:#1b6d85}.btn-info:hover{color:#fff;background-color:#31b0d5;border-color:#269abc}.btn-info:active,.btn-info.active,.open > .dropdown-toggle.btn-info{color:#fff;background-color:#31b0d5;border-color:#269abc}.btn-info:active:hover,.btn-info.active:hover,.open > .dropdown-toggle.btn-info:hover,.btn-info:active:focus,.btn-info.active:focus,.open > .dropdown-toggle.btn-info:focus,.btn-info:active.focus,.btn-info.active.focus,.open > .dropdown-toggle.btn-info.focus{color:#fff;background-color:#269abc;border-color:#1b6d85}.btn-info:active,.btn-info.active,.open > .dropdown-toggle.btn-info{background-image:none}.btn-info.disabled:hover,.btn-info[disabled]:hover,fieldset[disabled] .btn-info:hover,.btn-info.disabled:focus,.btn-info[disabled]:focus,fieldset[disabled] .btn-info:focus,.btn-info.disabled.focus,.btn-info[disabled].focus,fieldset[disabled] .btn-info.focus{background-color:#5bc0de;border-color:#46b8da}.btn-info .badge{color:#5bc0de;background-color:#fff}.btn-warning{color:#fff;background-color:#f0ad4e;border-color:#eea236}.btn-warning:focus,.btn-warning.focus{color:#fff;background-color:#ec971f;border-color:#985f0d}.btn-warning:hover{color:#fff;background-color:#ec971f;border-color:#d58512}.btn-warning:active,.btn-warning.active,.open > .dropdown-toggle.btn-warning{color:#fff;background-color:#ec971f;border-color:#d58512}.btn-warning:active:hover,.btn-warning.active:hover,.open > .dropdown-toggle.btn-warning:hover,.btn-warning:active:focus,.btn-warning.active:focus,.open > .dropdown-toggle.btn-warning:focus,.btn-warning:active.focus,.btn-warning.active.focus,.open > .dropdown-toggle.btn-warning.focus{color:#fff;background-color:#d58512;border-color:#985f0d}.btn-warning:active,.btn-warning.active,.open > .dropdown-toggle.btn-warning{background-image:none}.btn-warning.disabled:hover,.btn-warning[disabled]:hover,fieldset[disabled] .btn-warning:hover,.btn-warning.disabled:focus,.btn-warning[disabled]:focus,fieldset[disabled] .btn-warning:focus,.btn-warning.disabled.focus,.btn-warning[disabled].focus,fieldset[disabled] .btn-warning.focus{background-color:#f0ad4e;border-color:#eea236}.btn-warning .badge{color:#f0ad4e;background-color:#fff}.btn-danger{color:#fff;background-color:#d9534f;border-color:#d43f3a}.btn-danger:focus,.btn-danger.focus{color:#fff;background-color:#c9302c;border-color:#761c19}.btn-danger:hover{color:#fff;background-color:#c9302c;border-color:#ac2925}.btn-danger:active,.btn-danger.active,.open > .dropdown-toggle.btn-danger{color:#fff;background-color:#c9302c;border-color:#ac2925}.btn-danger:active:hover,.btn-danger.active:hover,.open > .dropdown-toggle.btn-danger:hover,.btn-danger:active:focus,.btn-danger.active:focus,.open > .dropdown-toggle.btn-danger:focus,.btn-danger:active.focus,.btn-danger.active.focus,.open > .dropdown-toggle.btn-danger.focus{color:#fff;background-color:#ac2925;border-color:#761c19}.btn-danger:active,.btn-danger.active,.open > .dropdown-toggle.btn-danger{background-image:none}.btn-danger.disabled:hover,.btn-danger[disabled]:hover,fieldset[disabled] .btn-danger:hover,.btn-danger.disabled:focus,.btn-danger[disabled]:focus,fieldset[disabled] .btn-danger:focus,.btn-danger.disabled.focus,.btn-danger[disabled].focus,fieldset[disabled] .btn-danger.focus{background-color:#d9534f;border-color:#d43f3a}.btn-danger .badge{color:#d9534f;background-color:#fff}.btn-link{color:#000;font-weight:400;border-radius:0}.btn-link,.btn-link:active,.btn-link.active,.btn-link[disabled],fieldset[disabled] .btn-link{background-color:transparent;-webkit-box-shadow:none;box-shadow:none}.btn-link,.btn-link:hover,.btn-link:focus,.btn-link:active{border-color:transparent}.btn-link:hover,.btn-link:focus{color:#000;text-decoration:none;background-color:transparent}.btn-link[disabled]:hover,fieldset[disabled] .btn-link:hover,.btn-link[disabled]:focus,fieldset[disabled] .btn-link:focus{color:#777;text-decoration:none}.btn-lg{padding:10px 16px;font-size:20px;line-height:1.3333333;border-radius:6px}.btn-sm{padding:5px 10px;font-size:14px;line-height:1.5;border-radius:3px}.btn-xs{padding:1px 5px;font-size:14px;line-height:1.5;border-radius:3px}.btn-block{display:block;width:100%}.btn-block + .btn-block{margin-top:5px}
.dropup,.dropdown{position:relative}.dropdown-toggle:focus{outline:0}.dropdown-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:160px;padding:5px 0;margin:2px 0 0;list-style:none;font-size:16px;text-align:left;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.15);border-radius:4px;-webkit-box-shadow:0 6px 12px rgba(0,0,0,0.175);box-shadow:0 6px 12px rgba(0,0,0,0.175);-webkit-background-clip:padding-box;background-clip:padding-box}.dropdown-menu.pull-right{right:0;left:auto}.dropdown-menu .divider{height:1px;margin:10px 0;overflow:hidden;background-color:#e5e5e5}.dropdown-menu > li > a{display:block;padding:3px 10px;clear:both;font-weight:400;line-height:1.4;color:#333;white-space:nowrap}.dropdown-menu > li > a:hover,.dropdown-menu > li > a:focus{text-decoration:none;color:#262626;background-color:#f5f5f5}.dropdown-menu > .active > a,.dropdown-menu > .active > a:hover,.dropdown-menu > .active > a:focus{color:#fff;text-decoration:none;outline:0;background-color:#195eff}.dropdown-menu > .disabled > a,.dropdown-menu > .disabled > a:hover,.dropdown-menu > .disabled > a:focus{color:#777}.dropdown-menu > .disabled > a:hover,.dropdown-menu > .disabled > a:focus{text-decoration:none;background-color:transparent;background-image:none;filter:progid:DXImageTransform.Microsoft.gradient(enabled = false);cursor:not-allowed}.open > .dropdown-menu{display:block}.open > a{outline:0}.dropdown-menu-right{left:auto;right:0}.dropdown-menu-left{left:0;right:auto}.dropdown-header{display:block;padding:3px 10px;font-size:14px;line-height:1.4;color:#777;white-space:nowrap}.dropdown-backdrop{position:fixed;left:0;right:0;bottom:0;top:0;z-index:990}.pull-right > .dropdown-menu{right:0;left:auto}.dropup .caret,.navbar-fixed-bottom .dropdown .caret{border-top:0;border-bottom:4px dashed;border-bottom:4px solid \9;content:""}.dropup .dropdown-menu,.navbar-fixed-bottom .dropdown .dropdown-menu{top:auto;bottom:100%;margin-bottom:2px}
.nav{margin-bottom:0;padding-left:0;list-style:none}.nav > li{position:relative;display:block}.nav > li > a{position:relative;display:block;padding:5px 10px}.nav > li > a:hover,.nav > li > a:focus{text-decoration:none;background-color:#a52a2a}.nav > li.disabled > a{color:#777}.nav > li.disabled > a:hover,.nav > li.disabled > a:focus{color:#777;text-decoration:none;background-color:transparent;cursor:not-allowed}.nav .open > a,.nav .open > a:hover,.nav .open > a:focus{background-color:#a52a2a;border-color:#000}.nav .nav-divider{height:1px;margin:10px 0;overflow:hidden;background-color:#e5e5e5}.nav > li > a > img{max-width:none}.nav-pills > li{float:left}.nav-pills > li > a{border-radius:4px}.nav-pills > li + li{margin-left:2px}.nav-pills > li.active > a,.nav-pills > li.active > a:hover,.nav-pills > li.active > a:focus{color:#fff;background-color:#195eff}.nav-stacked > li{float:none}.nav-stacked > li + li{margin-top:0px;margin-left:0}.navbar{position:relative;min-height:48px;max-height:48px;margin-bottom:22px;border:1px solid transparent}@media (min-width: 768px){.navbar{border-radius:4px}}@media (max-device-width: 480px) and (orientation: landscape){.navbar-fixed-top .navbar-collapse,.navbar-fixed-bottom .navbar-collapse{max-height:200px}}.navbar-static-top{z-index:1000;border-width:0 0 1px}@media (min-width: 768px){.navbar-static-top{border-radius:0}}.navbar-fixed-top,.navbar-fixed-bottom{position:fixed;right:0;left:0;z-index:1030}@media (min-width: 768px){.navbar-fixed-top,.navbar-fixed-bottom{border-radius:0}}.navbar-fixed-top{top:0;border-width:0 0 1px}.navbar-fixed-bottom{bottom:0;margin-bottom:0;border-width:1px 0 0}@media (min-width: 768px){.navbar > .container .navbar-brand,.navbar > .container-fluid .navbar-brand{margin-left:-15px}}.navbar-fixed-bottom .navbar-nav > li > .dropdown-menu{margin-bottom:0;border-top-right-radius:4px;border-top-left-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.navbar-default{background-color:#7d1935;border-color:#611329}.navbar-default .navbar-nav > li > a{color:#fff}.navbar-default .navbar-nav > li > a:hover,.navbar-default .navbar-nav > li > a:focus{color:#fff;background-color:#a52a2a}.navbar-default .navbar-nav > .active > a,.navbar-default .navbar-nav > .active > a:hover,.navbar-default .navbar-nav > .active > a:focus{color:#fff;background-color:#611329}.navbar-default .navbar-nav > .disabled > a,.navbar-default .navbar-nav > .disabled > a:hover,.navbar-default .navbar-nav > .disabled > a:focus{color:#ccc;background-color:transparent}.navbar-default .navbar-toggle{border-color:#a52a2a}.navbar-default .navbar-toggle:hover,.navbar-default .navbar-toggle:focus{background-color:#a52a2a}.navbar-default .navbar-toggle .icon-bar{background-color:#888}.navbar-default .navbar-collapse,.navbar-default .navbar-form{border-color:#611329}.navbar-default .navbar-nav > .open > a,.navbar-default .navbar-nav > .open > a:hover,.navbar-default .navbar-nav > .open > a:focus{background-color:#611329;color:#fff}@media (max-width: 767px){.navbar-default .navbar-nav .open .dropdown-menu > li > a{color:#fff}.navbar-default .navbar-nav .open .dropdown-menu > li > a:hover,.navbar-default .navbar-nav .open .dropdown-menu > li > a:focus{color:#fff;background-color:#a52a2a}.navbar-default .navbar-nav .open .dropdown-menu > .active > a,.navbar-default .navbar-nav .open .dropdown-menu > .active > a:hover,.navbar-default .navbar-nav .open .dropdown-menu > .active > a:focus{color:#fff;background-color:#611329}.navbar-default .navbar-nav .open .dropdown-menu > .disabled > a,.navbar-default .navbar-nav .open .dropdown-menu > .disabled > a:hover,.navbar-default .navbar-nav .open .dropdown-menu > .disabled > a:focus{color:#ccc;background-color:transparent}}.navbar-default .navbar-link{color:#fff}.navbar-default .navbar-link:hover{color:#fff}.navbar-default .btn-link{color:#fff}.navbar-default .btn-link:hover,.navbar-default .btn-link:focus{color:#fff}
.label{display:inline;padding:.2em .6em .3em;font-size:75%;font-weight:700;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25em}a.label:hover,a.label:focus{color:#fff;text-decoration:none;cursor:pointer}.label:empty{display:none}.btn .label{position:relative;top:-1px}.label-default{background-color:#777}.label-default[href]:hover,.label-default[href]:focus{background-color:#5e5e5e}.label-primary{background-color:#195eff}.label-primary[href]:hover,.label-primary[href]:focus{background-color:#0045e5}.label-success{background-color:#00bc16}.label-success[href]:hover,.label-success[href]:focus{background-color:#008910}.label-info{background-color:#5bc0de}.label-info[href]:hover,.label-info[href]:focus{background-color:#31b0d5}.label-warning{background-color:#f0ad4e}.label-warning[href]:hover,.label-warning[href]:focus{background-color:#ec971f}.label-danger{background-color:#d9534f}.label-danger[href]:hover,.label-danger[href]:focus{background-color:#c9302c}.badge{display:inline-block;min-width:10px;padding:3px 7px;font-size:14px;font-weight:700;color:#fff;line-height:1;vertical-align:middle;white-space:nowrap;text-align:center;background-color:#000;border-radius:10px}.badge:empty{display:none}.btn .badge{position:relative;top:-1px}.btn-xs .badge,.btn-group-xs > .btn .badge{top:0;padding:1px 5px}a.badge:hover,a.badge:focus{color:#fff;text-decoration:none;cursor:pointer}
.nav-pills > .active > a > .badge{color:#000;background-color:#fff}.nav-pills > li > a > .badge{margin-left:3px}
.clearfix:before,.clearfix:after,.container:before,.container:after,.container-fluid:before,.container-fluid:after,.row:before,.row:after,.form-horizontal .form-group:before,.form-horizontal .form-group:after,.nav:before,.nav:after,.navbar:before,.navbar:after,.navbar-header:before,.navbar-header:after,.navbar-collapse:before,.navbar-collapse:after{content:" ";display:table}.clearfix:after,.container:after,.container-fluid:after,.row:after,.form-horizontal .form-group:after,.nav:after,.navbar:after,.navbar-header:after,.navbar-collapse:after{clear:both}
.pull-right { float: right !important; } .pull-left { float: left !important; }

 
html { font-size:16px; }
body:not(.en) :lang(en), body:not(.el) :lang(el), body:not(.fr) :lang(fr) { display: none; }
body {
  font-size: 16px; line-height: 1.45; color: #000000;  background-color: #eceff1;
  margin: 0; padding-top: 70px; 
  font-family: 'Open Sans', 'Times New Roman', sans-serif;
  -webkit-animation: bugfix infinite 1s;
}
@-webkit-keyframes bugfix { from { fill: 0; } to { fill: 0; } }

a { color: #000; word-wrap: break-word; text-decoration: none; }
a:hover, a:focus, a:active { color: black; text-decoration: none; }
a.label { box-shadow: 2px 3px 4px 0px rgba(0,0,0,0.75); }
figure {  display: table; margin: 10px auto; }
figure figcaption { caption-side: bottom; color: darkblue; display: table-caption;
font-size: 14px; margin-top: 5px; text-align:justify; }
h1, h2, h3, h4, h5, h6 { margin:0px; text-align: justify; }
img { max-width: 100%; }
img.bordered { border:1px solid #021a40;  border-radius:20px; box-shadow: 2px 3px 4px 0px rgba(0,0,0,0.75); }
li { line-height: 1.5rem; text-align:justify; }
p { text-align:justify; text-indent: 30px; }
section { margin-top: 1rem; margin-bottom: 1rem; }
section>header { margin-bottom: .3rem; }
ul, ol { padding-left: 1.5rem; }

article .image { background-size: cover; background-position: center; }
article time { font-size: .8rem; }
article.grid { max-width:384px; margin-bottom:0.5rem; height:26rem; overflow: hidden; }
article.grid .image { min-height: 12rem; }
article.grid footer { padding: 1rem; background-color: #ffffe6; }
article.grid .title { overflow: hidden; }
article.grid .summary { color: #333; font-size: .8rem; line-height: 1rem; max-height: 5rem; overflow: hidden; }
article.single { background-color: #fff; margin: 0 auto; padding-bottom: 1rem; max-width:1200px; }
article.single .image { max-width:786px; min-height: 24rem; margin-left:auto; margin-right:auto; }
article.single .body { margin-bottom: 2rem;  padding: 0 5rem; }
article.single .body a:not(.label) { color: #78909c; text-decoration: underline; }
article.single .body>h1, article.single .body>h2, article.single .body>h3 { padding-top: 60px; margin-top: -30px; margin-bottom: 0.5rem; }
article.single .body li {  margin: 0.5rem auto; }
article.li { margin-bottom: .5rem; font-size: .8rem; line-height: 1rem; }
article.li .cell { display:table-cell; vertical-align: middle; }
article.li .image { width: 4.1rem; height: 4.1rem; box-shadow: 2px 3px 4px 0px rgba(0,0,0,0.75); }
article.li footer { display:table-cell; vertical-align: middle; padding-left: .5rem;  }
article.li time { font-size: .7rem; }
article.li .title { font-size: 0.85rem; line-height: 1rem; font-weight: 700; }

.body .title { font-size: 2rem; line-height: 3rem; margin: 0.5rem auto; }
.label { display:inline-block; padding-top: 0.25rem; }

.navbar * { color: white !important; }
.navbar .dropdown-menu a:hover { background-color: brown; }
.nav>li>a:hover, .nav>li>a:focus { color: white; background-color: brown; }
.nav-pills { display: inline-block; margin: 0; }
.nav-pills>li.active>a { font-weight: 700 !important; background-color: #00bc16 !important; }
.nav-pills>li.active>a .badge { color: #00bc16; }
.cssdropdown { margin-top: 2rem; }
.cssdropdown input[type=checkbox], .cssdropdown ul { display: none; }
.cssdropdown label { font-size: 1.25rem; font-weight:700; min-width: 300px; }
.cssdropdown input[type=checkbox]:checked ~ ul { display: table-cell; }

.p-logo {
  font-family: 'Comic Sans MS', cursive; font-weight: bold; font-size: 2rem;
  text-shadow: 4px 2px 2px rgba(0,0,0,0.75);
  margin-top: 3px;
}
.l-footer * { color: white; }
.l-footer { background-color: #7D1935; padding: 0.75rem 0; text-align: center; }

.lgfont { font-size: 2rem; }
.margin-sm { margin: 0.5rem; }
.side-margins-1 { margin-left: 1rem !important; margin-right: 1rem !important; }
.side-margins-2 { margin-left: 2rem !important;; margin-right: 2rem !important; }
.margin-top-sm {  margin-top: 0.5rem; }
.topmargin5 {  margin-top: 5px; }
.topmargin7 { margin-top: 7px; }

#search-section, #results-section { display:none; }
#TableOfContents ul { list-style: none; }
#TableOfContents>ul {  padding-left: 0; font-weight: 700; }
#TableOfContents>ul ul { font-weight: normal; }

.summary { text-align:justify; }
.max-width640 { max-width: 640px; }
.floatleft { float:left; margin-right: 10px; }
.floatright { float:right; margin-left: 10px; }

.centered { margin-left: auto !important;  margin-right: auto !important; }
img.centered { display:block !important; }
div.centered, p.centered, figcaption.centered, nav.centered, table.centered, h1.centered, h2.centered, h3.centered { text-align:center !important; }

@media (max-width: 768px) {
  h1 { font-size: 1.4rem; line-height: 1.5rem; }
  h2 { font-size: 1.2rem; line-height: 1.5rem; }
  article.single .image { min-height: 12rem; }
  article.single .body pre { margin: 1rem -1rem; }
  article.single .body pre code { padding: 1rem 1rem; }
  article.single .body { padding: 0 1rem; }
  ul.scroll-menu { max-height: 250px; }
  .cssdropdown label, .nav-stacked>li>a { min-width: 240px; }
  .hidden768 { display:none; }
  .text-smaller {
    font-family: 'Open Sans', 'Times New Roman', sans-serif;
    font-size: 1rem;  font-weight: 700; letter-spacing: -1px;
    padding-left: 0px !important;  padding-right: 0px !important;
    line-height:32px;
  }
}
</style>
<link rel="alternate" type="application/rss+xml" title="RSS" href="https://alamot.github.io/index.xml">

  <link href="https://alamot.github.io/index.xml" rel="alternate" type="application/rss+xml" title="The Portal of Knowledge" />


  <title>How to write your own Operating System (x86_64): Multitasking - The Portal of Knowledge</title>
  <meta property='og:title' content="How to write your own Operating System (x86_64): Multitasking - The Portal of Knowledge">
  <meta property="og:type" content="article">
  <meta name="description" content="A series of articles that provide guidance for writing your own Operating System (x86_64). Μια σειρά από άρθρα που παρέχουν οδηγίες για το πως να γράψετε το δικό σας Λειτουργικό Σύστημα (x86_64).">
  <meta property="og:description" content="A series of articles that provide guidance for writing your own Operating System (x86_64). Μια σειρά από άρθρα που παρέχουν οδηγίες για το πως να γράψετε το δικό σας Λειτουργικό Σύστημα (x86_64).">
  <meta property="og:image" content="https://alamot.github.io/images/os4.jpg">
  <meta property="og:image:width" content="768" />
  <meta property="og:image:height" content="384" />

<meta property="og:url" content="https://alamot.github.io/os_tasking/">


<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage":{
      "@type":"WebPage",
      "@id":"https:\/\/alamot.github.io\/"
    },
    "headline": "How to write your own Operating System (x86_64): Multitasking |  ",
    "image": {
      "@type": "ImageObject",
      "url": "",
      "height": 700,
      "width": 700
    },
    "datePublished": "2022-04-23T00:00:00JST",
    "dateModified": "2022-04-23T00:00:00JST",
    "author": {
      "@type": "Person",
      "name": "Antonios Tsolis",
      "image": "https:\/\/alamot.github.io\/images/logo.png"
    },
    "publisher": {
      "@type": "Organization",
      "name": "",
      "logo": {
        "@type": "ImageObject",
        "url": "https:\/\/alamot.github.io\/images/logo.png",
        "height": 60,
        "width": 60
      }
    },
    "description": ""
  }
</script>
</head>
<body id="mainbody" class="en" lang="en">
<nav class="navbar navbar-default navbar-fixed-top centered">
<div class="container-fluid">
  
   <ul class="nav nav-pills pull-left topmargin7">
    <li id="content-selector" role="presentation" class="dropdown">
    <a class="dropdown-toggle btn-danger" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false"><span lang="en">Contents</span><span lang="el">Περιεχόμενα</span> <i class="fa fa-caret-down" aria-hidden="true"></i></a>
      <ul class="dropdown-menu scroll-menu">
        <li><a href="#title"><span lang="en">Start</span><span lang="el">Αρχή</span></a></li>
        
        
        
         
<li><a href="#intro"><span lang="en">Introduction</span><span lang="el">Εισαγωγή</span></a></li>
<li><a href="#kernelcode"><span lang="en">Kernel Code: Multitasking</span><span lang="el">Κώδικας του Πυρήνα: Πολυδιεργασία</span></a>
<ul>
<li><a href="#kernel-tasking-asm">kernel/tasking.asm</a></li>
<li><a href="#kernel-isr-asm">kernel/isr.asm</a></li>
<li><a href="#kernel-kernel-asm">kernel/kernel.asm</a></li>
</ul></li>
<li><a href="#runningcode"><span lang="en">Running our code</span><span lang="el">Εκτέλεση του κώδικά μας</span></a></li>
<li><a href="#fullcode"><span lang="en">Full code</span><span lang="el">Πλήρης κώδικας</span></a></li>
<li><a href="#reference"><span lang="en">References</span><span lang="el">Αναφορές</span></a></li>
 
      
        <li><a href="#posts-section"><span lang="en">See also</span><span lang="el">Δείτε επίσης</span></a></li>
      </ul>
    </li>
   </ul>
  
   
  <ul class="nav nav-pills">
      <li><a class="p-logo" href="https://alamot.github.io/"><i class="fa fa-home" aria-hidden="true"></i> <span class="hidden768" lang="en">The Portal of Knowledge</span><span class="hidden768" lang="el">Η Πύλη της Γνώσης</span></a></li>
  </ul>
  
  <ul class="nav nav-pills pull-right topmargin7"> 
    <li id="lang-selector" role="presentation" class="dropdown">
      <a id="lang-index" class="dropdown-toggle btn-primary" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Language <i class="fa fa-caret-down" aria-hidden="true"></i></a>
      <ul class="dropdown-menu">
        <li><a id="en" href="#">English</a></li>
        <li><a id="el" href="#">Ελληνικά</a></li>
      </ul>
    </li>  
  </ul>
</div>
</nav>
<script>
langtext = "English";
language = localStorage.getItem('language');
if (language) {
  document.getElementById('mainbody').setAttribute('class', language);
  document.getElementById('mainbody').setAttribute('lang', language);
  if (language == 'el') { langtext="Ελληνικά"; }
  document.getElementById("lang-index").innerHTML=langtext+' <i class="fa fa-caret-down" aria-hidden="true"></i>';
}
</script>




<div class="container-fluid">
  <div class="row">
    <div class="col-md-12">
      <article class="single centered">
        <div class="image" style="background-image: url(https://alamot.github.io/images/os4.jpg);"></div>
        <div class="body">
            <header lang="en"><h1 id="title" class="title">How to write your own Operating System (x86_64): Multitasking</h1></header>
            <header lang="el"><h1 class="title">Πως να γράψετε το δικό σας Λειτουργικό Σύστημα (x86_64): Πολυδιεργασία</h1></header>
            <i class="fa fa-calendar topmargin7"  aria-hidden="true"></i>  
            <time lang="en" class="topmargin7">23 Apr 2022</time>
            <time lang="el" class="topmargin7">23 Απρ 2022</time>
            &middot; <i class="fa fa-folder-open-o topmargin7" aria-hidden="true"></i>
            
              <a class="label label-success topmargin7" href='https://alamot.github.io/categories/coding'>
                <span lang="en">Coding</span>
                <span lang="el">Προγραμματισμός</span>
              </a>
            
            &middot; <i class="fa fa-tags topmargin7" aria-hidden="true"></i>
            
              <a class="label label-primary topmargin7" href='https://alamot.github.io/tags/assembly'>
                <span lang="en">assembly</span>
                <span lang="el">assembly</span>
                </a>
            
              <a class="label label-primary topmargin7" href='https://alamot.github.io/tags/os'>
                <span lang="en">os</span>
                <span lang="el">λειτουργικό σύστημα</span>
                </a>
            
         
         <aside>
          <section>
            <header lang="en"><h2>Contents</h2></header>
            <header lang="el"><h2>Περιεχόμενα</h2></header>
            <div><nav id="TableOfContents">
<ul>
<li><a href="#intro"><span lang="en">Introduction</span><span lang="el">Εισαγωγή</span></a></li>
<li><a href="#kernelcode"><span lang="en">Kernel Code: Multitasking</span><span lang="el">Κώδικας του Πυρήνα: Πολυδιεργασία</span></a>
<ul>
<li><a href="#kernel-tasking-asm">kernel/tasking.asm</a></li>
<li><a href="#kernel-isr-asm">kernel/isr.asm</a></li>
<li><a href="#kernel-kernel-asm">kernel/kernel.asm</a></li>
</ul></li>
<li><a href="#runningcode"><span lang="en">Running our code</span><span lang="el">Εκτέλεση του κώδικά μας</span></a></li>
<li><a href="#fullcode"><span lang="en">Full code</span><span lang="el">Πλήρης κώδικας</span></a></li>
<li><a href="#reference"><span lang="en">References</span><span lang="el">Αναφορές</span></a></li>
</ul>
</nav></div>
          </section>
         </aside>
        
        

<h1 id="intro"><span lang="en">Introduction</span><span lang="el">Εισαγωγή</span></h1>

<p lang="en">In our previous articles, we showed <a href="/os_stage1/">how to implement a bootloader</a>, <a href="/os_stage2/">how to enter the long mode</a> and <a href="/os_isr/">how to deal with interrupts</a>. In this part, we will talk about Multitasking. There are two basic forms of multitasking: Cooperative Multitasking and Preemptive Multitasking.<p>
<p lang="el">Σε προηγούμενα άρθρα μας, είδαμε <a href="/os_stage1/">πώς να υλοποιήσουμε έναν εκκινητή</a>, <a href="/os_stage2/">πώς να μπούμε στη λειτουργία μακράς κατάστασης</a> και <a href="/os_isr/">πως να διαχειριστούμε τις Διακοπές</a>. Σε αυτό το μέρος, θα συζητήσουμε την Πολυδιεργασία (Multitasking). Υπάρχουν δύο βασικοί τύποι Πολυδιεργασίας: η Συνεργατική Πολυδιεργασία (Cooperative Multitasking) και η Προεκτοπιστική Πολυδιεργασία (Preemptive Multitasking).</p>

<p lang="en">For cooperative multitasking, a task uses the CPU until it voluntarily gives up the CPU (e.g. Windows 3.x or pre-X MacOS).<p>
<p lang="el">Για τη Συνεργατική Πολυδιεργασία, μια διεργασία χρησιμοποιεί τον επεξεργαστη μέχρις ότου τον παραδόσει εθελοντικά (λ.χ. αυτό συνέβαινε στα Windows 3.x ή στα pre-X MacOS).<p>

<p lang="en">In a preemptive multitasking system (i.e. most modern operating systems), task switches are caused by an external actor (usually the Κernel) and are done for one or more reasons (e.g. when the task consumed its timeframe and/or when a higher priority task needed the CPU). We can further subdivide these systems into those who can preempt only user tasks (e.g. pre-2.6 kernel Linux), and those who can preempt the Kernel itself. This is a major concern for any real-time system or multimedia applications because a non-preemptive Kernel may cause significant latencies and reduced responsiveness.</p>
<p lang="el">Σε ένα σύστημα Προεκτοπιστικής Πολυδιεργασίας (όπως ειναι τα περισσότερα μοντέρνα λειτουργικά συστήματα), οι εναλλαγές των διεργασιών προκαλούνται από έναν εξωτερικό παράγοντα (συνήθως τον Πυρήνα) και γίνονται για έναν ή περισσότερους λόγους (π.χ. όταν η διεργασία έχει εξαντλήσει το χρονικό πλαίσιο που της αναλογεί ή/και όταν μια διεργασία υψηλότερης προτεραιότητας χρειάζεται τον επεξεργαστή). Μπορούμε να υποδιαιρέσουμε περαιτέρω αυτά τα συστήματα, σε εκείνα που μπορούν να προεκτοπίζουν μόνο διεργασίες των χρηστών και σε εκείνα που μπορούν να προεκτοπίζουν και τις διεργασίες του ίδιου του Πυρήνα. Αυτό αποτελεί ένα σημαντικό ζήτημα για οποιοδήποτε σύστημα Πραγματικού Χρόνου (real-time system) ή για εφαρμογές Πολυμέσων (Multimedia applications), επειδή ένας μη προεκτοπιστικός Πυρήνας ενδέχεται να προκαλεί σημαντικές καθυστερήσεις και μειωμένη αποκρισιμότητα.</p>

<p lang="en">Another important fact you need to know: Even though there are mechanisms in the hardware to facilitate the task / context switching, they come with significant performance considerations. The hardware mechanisms save almost all of the CPU state and consequently, they can be slower than it is necessary. For example, when the CPU loads segment registers, a lot of access and permission checks are involved. As the long mode doesn't use segmentation anymore, loading the segment registers during context switches may not be required. In any case, CPU manufacturers do not seem eager to improve the hardware switching mechanisms. Therefore, modern operating systems prefer to implement the switching in software (as we will do).</p>
<p lang="el">Ένα ακόμη σημαντικό γεγονός που πρέπει να γνωρίζετε: Αν και υπάρχουν μηχανισμοί στο υλικό που διευκολύνουν την εναλλαγή διεργασιών / πλαισίου, αυτοί συνοδεύονται από σοβαρές επιφυλάξεις όσον αφορά την απόδοσή τους. Οι μηχανισμοί του υλικού αποθηκεύουν σχεδόν όλη την κατάτασταση του επεξεργαστή με συνέπεια τις περισσότερες φορές να είναι πιο αργοί από όσο χρειάζεται. Για παράδειγμα, όταν ο επεξεργαστής φορτώνει τους καταχωρητές τμημάτων, επιτελεί και όλους τους σχετικούς ελέγχους πρόσβασης και δικαιωμάτων. Αλλά, καθώς η λειτουργία μακράς κατάστασης δε χρησιμοποιεί πια την κατάτμηση (segmentation), η φόρτωση των καταχωρητών τμήματος κατά την εναλλαγή πλαισίου μπορεί να μη χρειάζεται. Σε κάθε περίπτωση, οι κατασκευαστές επεξεργαστών δε φαίνονται ιδιαίτερα ενθουσιώδεις στο να βελτιώσουν τους μηχανισμούς εναλλαγής στο υλικό. Οπότε, τα σύγχρονα λειτουργικά συστήματα προτιμούν να υλοποιούν την εναλλαγή στο λογισμικό (όπως θα κάνουμε κι εμείς).</p>

<h1 id="kernelcode"><span lang="en">Kernel Code: Multitasking</span><span lang="el">Κώδικας του Πυρήνα: Πολυδιεργασία</span></h1>

<h2 id="kernel-tasking-asm">kernel/tasking.asm</h2>

<p lang="en">In this file, we define a struct named TS where we are gonna save the task state (i.e. the register values and other important information for the task). For the time being, because we don't have implement a memory manager yet, we allocate and initialize statically three such structs (task state "slots"). As we can see, we also have some functions to save and load a task state and to create a new task (note that in order to create a new task, it's important to allocate a new stack for it):</p>
<p lang="el">Σε αυτό το αρχείο, ορίζουμε μια δομή που λέγεται TS, στην οποία πρόκειται να αποθηκεύουμε την κατάσταση μιας διεργασίας (δηλαδή τις τιμές των καταχωρητών και άλλες σημαντικές πληροφορίες για τη διεργασία). Προς το παρόν, επειδή δεν έχουμε υλοποιήσει ακόμη κάποιον διαχειριστή μνήμης, θα δεσμεύσουμε και θα αρχικοποιήσουμε στατικά τρείς τέτοιες δομές ("θέσεις αποθήκευσης" της κατάστασης των διεργασιών). Όπως μπορούμε να δούμε, έχουμε επίσης κάποιες συναρτήσεις για την αποθήκευση και την ανάκτηση της κατάστασης μιας διεργασίας καθώς και για τη δημιουργία μιας νέας διεργασίας (σημείωστε ότι για να δημιουργήσουμε μια νέα διεργασία είναι σημαντικό να δεσμεύσουμε μια νέα στοίβα για αυτήν):</p>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nasm" data-lang="nasm"><span class="line"><span class="cl"><span class="k">BITS</span> <span class="mi">64</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;---Define----------------------------------------------------------------------</span>
</span></span><span class="line"><span class="cl"><span class="k">STRUC</span> <span class="nv">TS</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.status</span> <span class="nv">resw</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.rip</span> <span class="nv">resq</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.rax</span> <span class="nv">resq</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.rbx</span> <span class="nv">resq</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.rcx</span> <span class="nv">resq</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.rdx</span> <span class="nv">resq</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.rbp</span> <span class="nv">resq</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.rsi</span> <span class="nv">resq</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.rdi</span> <span class="nv">resq</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.rsp</span> <span class="nv">resq</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.r8</span>  <span class="nv">resq</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.r9</span>  <span class="nv">resq</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.r10</span> <span class="nv">resq</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.r11</span> <span class="nv">resq</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.r12</span> <span class="nv">resq</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.r13</span> <span class="nv">resq</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.r14</span> <span class="nv">resq</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.r15</span> <span class="nv">resq</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.cs</span> <span class="nv">resw</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.ds</span> <span class="nv">resw</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.es</span> <span class="nv">resw</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.fs</span> <span class="nv">resw</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.gs</span> <span class="nv">resw</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.ss</span> <span class="nv">resw</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.cr3</span> <span class="nv">resq</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="nf">.rflags</span> <span class="nv">resq</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="k">ENDSTRUC</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;---Initialized data----------------------------------------------------------</span>
</span></span><span class="line"><span class="cl"><span class="nf">num_tasks</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nf">active_task_slot</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nf">stack_allocation</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nf">code_segment</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nf">return_address</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nf">stack_segment</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nf">stack_pointer</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nf">rflags</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">; Task Slot 0</span>
</span></span><span class="line"><span class="cl"><span class="nl">TS0:</span> <span class="nf">ISTRUC</span> <span class="nv">TS</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.status</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rip</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rax</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rbx</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rcx</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rdx</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rbp</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rsi</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rdi</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rsp</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r8</span><span class="p">,</span>  <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r9</span><span class="p">,</span>  <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r10</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r11</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r12</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r13</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r14</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r15</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.cs</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.ds</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.es</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.fs</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.gs</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.ss</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.cr3</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rflags</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nf">IEND</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">; Task Slot 1</span>
</span></span><span class="line"><span class="cl"><span class="nl">TS1:</span> <span class="nf">ISTRUC</span> <span class="nv">TS</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.status</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rip</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rax</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rbx</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rcx</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rdx</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rbp</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rsi</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rdi</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rsp</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r8</span><span class="p">,</span>  <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r9</span><span class="p">,</span>  <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r10</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r11</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r12</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r13</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r14</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r15</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.cs</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.ds</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.es</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.fs</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.gs</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.ss</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.cr3</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rflags</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nf">IEND</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">; Task Slot 2</span>
</span></span><span class="line"><span class="cl"><span class="nl">TS2:</span> <span class="nf">ISTRUC</span> <span class="nv">TS</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.status</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rip</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rax</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rbx</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rcx</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rdx</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rbp</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rsi</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rdi</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rsp</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r8</span><span class="p">,</span>  <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r9</span><span class="p">,</span>  <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r10</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r11</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r12</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r13</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r14</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.r15</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.cs</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.ds</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.es</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.fs</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.gs</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.ss</span><span class="p">,</span> <span class="nv">dw</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.cr3</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="nf">at</span> <span class="nv">TS.rflags</span><span class="p">,</span> <span class="nv">dq</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nf">IEND</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">; Array of pointers to the task slots</span>
</span></span><span class="line"><span class="cl"><span class="nf">TS_ARRAY</span> <span class="nv">dq</span> <span class="nv">TS0</span><span class="p">,</span> <span class="nv">TS1</span><span class="p">,</span> <span class="nv">TS2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;---Code------------------------------------------------------------------------</span>
</span></span><span class="line"><span class="cl"><span class="nl">Save_task_state:</span>   
</span></span><span class="line"><span class="cl"><span class="c1">;**********************************************************************************;</span>
</span></span><span class="line"><span class="cl"><span class="c1">; Save task state to the active task slot                                          ;</span>
</span></span><span class="line"><span class="cl"><span class="c1">;**********************************************************************************;</span>
</span></span><span class="line"><span class="cl">    <span class="nf">push</span> <span class="nv">r15</span>
</span></span><span class="line"><span class="cl">    <span class="nf">push</span> <span class="nv">r15</span>
</span></span><span class="line"><span class="cl">    <span class="nf">push</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="p">[</span><span class="nv">active_task_slot</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nv">r15</span><span class="p">,</span> <span class="p">[</span><span class="nv">TS_ARRAY</span><span class="o">+</span><span class="nb">rax</span><span class="o">*</span><span class="mi">8</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="p">[</span><span class="nv">code_segment</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.cs</span><span class="p">],</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="p">[</span><span class="nv">return_address</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rip</span><span class="p">],</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="p">[</span><span class="nv">stack_segment</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.ss</span><span class="p">],</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="p">[</span><span class="nv">stack_pointer</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rsp</span><span class="p">],</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="p">[</span><span class="nv">rflags</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rflags</span><span class="p">],</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">pop</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rax</span><span class="p">],</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rbx</span><span class="p">],</span> <span class="nb">rbx</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rcx</span><span class="p">],</span> <span class="nb">rcx</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rdx</span><span class="p">],</span> <span class="nb">rdx</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rbp</span><span class="p">],</span> <span class="nb">rbp</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rsi</span><span class="p">],</span> <span class="nb">rsi</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rdi</span><span class="p">],</span> <span class="nb">rdi</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.r8</span><span class="p">],</span> <span class="nv">r8</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.r9</span><span class="p">],</span> <span class="nv">r9</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.r10</span><span class="p">],</span> <span class="nv">r10</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.r11</span><span class="p">],</span> <span class="nv">r11</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.r12</span><span class="p">],</span> <span class="nv">r12</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.r13</span><span class="p">],</span> <span class="nv">r13</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.r14</span><span class="p">],</span> <span class="nv">r14</span>
</span></span><span class="line"><span class="cl">    <span class="nf">pop</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.r15</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">pop</span> <span class="nv">r15</span>
</span></span><span class="line"><span class="cl">    <span class="nf">ret</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nl">Load_task_state:</span>    
</span></span><span class="line"><span class="cl"><span class="c1">;**********************************************************************************;</span>
</span></span><span class="line"><span class="cl"><span class="c1">; Load task state from the active task slot                                        ;</span>
</span></span><span class="line"><span class="cl"><span class="c1">;**********************************************************************************;</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="p">[</span><span class="nv">active_task_slot</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nv">r15</span><span class="p">,</span> <span class="p">[</span><span class="nv">TS_ARRAY</span><span class="o">+</span><span class="nb">rax</span><span class="o">*</span><span class="mi">8</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rip</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">return_address</span><span class="p">],</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.cs</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">code_segment</span><span class="p">],</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.ss</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">stack_segment</span><span class="p">],</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rsp</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">stack_pointer</span><span class="p">],</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rflags</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">rflags</span><span class="p">],</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rax</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rbx</span><span class="p">,</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rbx</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rcx</span><span class="p">,</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rcx</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rdx</span><span class="p">,</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rdx</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rbp</span><span class="p">,</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rbp</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rsi</span><span class="p">,</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rsi</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rdi</span><span class="p">,</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rdi</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nv">r8</span><span class="p">,</span>  <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.r8</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nv">r9</span><span class="p">,</span>  <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.r9</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nv">r10</span><span class="p">,</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.r10</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nv">r11</span><span class="p">,</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.r11</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nv">r12</span><span class="p">,</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.r12</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nv">r13</span><span class="p">,</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.r13</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nv">r14</span><span class="p">,</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.r14</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">push</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.r15</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">pop</span> <span class="nv">r15</span>
</span></span><span class="line"><span class="cl">    <span class="nf">ret</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nl">Create_task:</span>
</span></span><span class="line"><span class="cl"><span class="c1">;**********************************************************************************;</span>
</span></span><span class="line"><span class="cl"><span class="c1">; Crate a new task                                                                 ;</span>
</span></span><span class="line"><span class="cl"><span class="c1">;----------------------------------------------------------------------------------;</span>
</span></span><span class="line"><span class="cl"><span class="c1">; rsi: pointer to the address of the first instruction of the task                 ;</span>
</span></span><span class="line"><span class="cl"><span class="c1">;**********************************************************************************;</span>
</span></span><span class="line"><span class="cl">    <span class="nf">push</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">push</span> <span class="nv">r15</span>
</span></span><span class="line"><span class="cl">    <span class="c1">; Trick to save RFLAGS to [rflags]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">pushfq</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="p">[</span><span class="nb">rsp</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">rflags</span><span class="p">],</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">add</span> <span class="nb">rsp</span><span class="p">,</span> <span class="mi">8</span> <span class="c1">; Instead of popfq</span>
</span></span><span class="line"><span class="cl">    <span class="c1">; Save code and stack selectors</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">code_segment</span><span class="p">],</span> <span class="nb">cs</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">stack_segment</span><span class="p">],</span> <span class="nb">ss</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;Set active task slot equal to the number of tasks.</span>
</span></span><span class="line"><span class="cl">    <span class="c1">;This means we make active an emply slot (as we count task slots from 0).</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="p">[</span><span class="nv">num_tasks</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">active_task_slot</span><span class="p">],</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">    <span class="c1">; Init task state.</span>
</span></span><span class="line"><span class="cl">    <span class="nf">call</span> <span class="nv">Save_task_state</span>
</span></span><span class="line"><span class="cl">    <span class="c1">; Set rip (in the state of task) equal to rsi (i.e. the task address).</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nv">r15</span><span class="p">,</span> <span class="p">[</span><span class="nv">TS_ARRAY</span><span class="o">+</span><span class="nb">rax</span><span class="o">*</span><span class="mi">8</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rip</span><span class="p">],</span> <span class="nb">rsi</span> 
</span></span><span class="line"><span class="cl">    <span class="c1">; Allocate a new stack of 1000 bytes for the task.</span>
</span></span><span class="line"><span class="cl">    <span class="nf">sub</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">stack_allocation</span><span class="p">],</span> <span class="mi">1000</span>  
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="p">[</span><span class="nv">stack_allocation</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="c1">; Set rsp (in the state of task) to point to the new stack for the task.</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">r15</span><span class="o">+</span><span class="nv">TS.rsp</span><span class="p">],</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">    <span class="c1">; Increase number of tasks by one.</span>
</span></span><span class="line"><span class="cl">    <span class="nf">inc</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">num_tasks</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">pop</span> <span class="nv">r15</span>
</span></span><span class="line"><span class="cl">    <span class="nf">pop</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">ret</span></span></span></code></pre></div>

<h2 id="kernel-isr-asm">kernel/isr.asm</h2>

<p lang="en">In order to implement the Preemptive Multitasking, we will modify our previously written handler (i.e. the Interrupt Service Routine) for the IRQ0 (timer). The trick is that, when an interrupt occurs in long mode, the processor pushes in the stack the interrupted program's stack pointer (SS:RSP), the RFLAGS value, and the return pointer (CS:RIP). When we want to switch tasks (let's say every x ticks), we can replace these values with the corresponding values for the next task. The instruction IRETQ will load these values to the proper registers and thus, we will switch to the next task:</p>
<p lang="el">Για να υλοποιήσουμε την Προεκτοπιστική Πολυδιεργασία, θα τροποποιήσουμε τον προηγούμενο χειριστή (δηλαδή τη Ρουτίνα Εξυπηρέτησης Διακοπής) που είχαμε γράψει για το IRQ0 (χρονιστή). Το κόλπο είναι ότι, όταν συμβεί μια διακοπή στη λειτουργία μακράς κατάστασης, ο επεξεργαστής φορτώνει στη στοίβα τον δείκτη στοίβας του διακοπτόμενου προγράμματος (SS:RSP), την τιμή των RFLAGS, και τον Δείκτη Επιστροφής  (CS:RIP). Οπότε, όταν θέλουμε να αλλάζουμε διεργασία (ας πούμε κάθε χ παλμούς του χρονιστή), μπορούμε να αντικαθιστούμε τις τιμές αυτές με τις αντίστοιχες τιμές για την επόμενη διεργασία. Η εντολή IRETQ θα φορτώνει αυτές τις τιμες στους κατάλληλους καταχωρητές και έτσι θα μεταβαίνουμε στην επόμενη διεργασία:</p>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nasm" data-lang="nasm"><span class="line"><span class="cl"><span class="nf">...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nl">ISR_systimer:</span>
</span></span><span class="line"><span class="cl"><span class="c1">;*****************************************************************************;</span>
</span></span><span class="line"><span class="cl"><span class="c1">; System Timer Interrupt Service Routine (IRQ0 mapped to INT 0x20)            ;</span>
</span></span><span class="line"><span class="cl"><span class="c1">;*****************************************************************************;</span>
</span></span><span class="line"><span class="cl">    <span class="nf">push</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">al</span><span class="p">,</span> <span class="nv">PIC_EOI</span>       <span class="c1">; Send EOI (End of Interrupt) command</span>
</span></span><span class="line"><span class="cl">    <span class="nf">out</span> <span class="nv">PIC1_COMMAND</span><span class="p">,</span> <span class="nb">al</span>  
</span></span><span class="line"><span class="cl">    <span class="nf">pop</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">inc</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">systimer_ticks</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">inc</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">tasktimer_ticks</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nf">cmp</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">tasktimer_ticks</span><span class="p">],</span> <span class="mi">1</span> <span class="c1">; Every how many ticks we want to switch tasks.</span>
</span></span><span class="line"><span class="cl">    <span class="nf">jg</span> <span class="nv">.switch_task</span>
</span></span><span class="line"><span class="cl">    <span class="nf">iretq</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="nl">.switch_task:</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">tasktimer_ticks</span><span class="p">],</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">        <span class="c1">; In long mode, when an interrupt occurs, the processor pushes in the stack</span>
</span></span><span class="line"><span class="cl">        <span class="c1">; the interrupted program&#39;s stack pointer (SS:RSP), the RFLAGS, and the</span>
</span></span><span class="line"><span class="cl">        <span class="c1">; return pointer (CS:RIP). In order to switch task, we have to replace them.</span>
</span></span><span class="line"><span class="cl">        <span class="c1">; Therefore, we remove (pop) them from the stack.</span>
</span></span><span class="line"><span class="cl">        <span class="nf">pop</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">return_address</span><span class="p">]</span> <span class="c1">; RIP</span>
</span></span><span class="line"><span class="cl">        <span class="nf">pop</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">code_segment</span><span class="p">]</span>   <span class="c1">; CS</span>
</span></span><span class="line"><span class="cl">        <span class="nf">pop</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">rflags</span><span class="p">]</span>         <span class="c1">; RFLAGS</span>
</span></span><span class="line"><span class="cl">        <span class="nf">pop</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">stack_pointer</span><span class="p">]</span>  <span class="c1">; RSP</span>
</span></span><span class="line"><span class="cl">        <span class="nf">pop</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">stack_segment</span><span class="p">]</span>  <span class="c1">; SS</span>
</span></span><span class="line"><span class="cl">        <span class="c1">; We save the current task state in the active task slot.</span>
</span></span><span class="line"><span class="cl">        <span class="nf">call</span> <span class="nv">Save_task_state</span>
</span></span><span class="line"><span class="cl">        <span class="c1">; We activate the next task slot</span>
</span></span><span class="line"><span class="cl">        <span class="nf">inc</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">active_task_slot</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="c1">; We check if the current task was the last task.</span>
</span></span><span class="line"><span class="cl">        <span class="nf">push</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="p">[</span><span class="nv">num_tasks</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="nf">cmp</span> <span class="p">[</span><span class="nv">active_task_slot</span><span class="p">],</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">        <span class="nf">pop</span> <span class="nb">rax</span>
</span></span><span class="line"><span class="cl">        <span class="nf">jnz</span> <span class="nv">.load</span>
</span></span><span class="line"><span class="cl">        <span class="c1">; If we reach the last task, switch to the first task</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">active_task_slot</span><span class="p">],</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">       <span class="nl">.load:</span>
</span></span><span class="line"><span class="cl">        <span class="c1">; Load the next task state from the active task slot.</span>
</span></span><span class="line"><span class="cl">        <span class="nf">call</span> <span class="nv">Load_task_state</span>
</span></span><span class="line"><span class="cl">        <span class="c1">; We now push back to the stack the values we have loaded for the next task.</span>
</span></span><span class="line"><span class="cl">        <span class="nf">push</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">stack_segment</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="nf">push</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">stack_pointer</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="nf">push</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">rflags</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="nf">push</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">code_segment</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="nf">push</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">return_address</span><span class="p">]</span> 
</span></span><span class="line"><span class="cl">        <span class="c1">; The instruction IRETQ will load these values to the proper registers</span>
</span></span><span class="line"><span class="cl">        <span class="c1">; and we will switch to the next task.</span>
</span></span><span class="line"><span class="cl">        <span class="nf">iretq</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">...</span></span></span></code></pre></div>

<h2 id="kernel-kernel-asm">kernel/kernel.asm</h2>

<p lang="en">Here, we create three distinct tasks in order to see the Preemptive Multitasking in action:</p>
<p lang="el">Εδώ, δημιουργούμε τρεις ξεχωριστές διεργασίες ώστε να δούμε την Προεκτοπιστική Πολυδιεργασία στην πράξη:</p>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nasm" data-lang="nasm"><span class="line"><span class="cl"><span class="k">BITS</span> <span class="mi">64</span>  <span class="c1">; We have entered the long mode! :)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;---Define----------------------------------------------------------------------</span>
</span></span><span class="line"><span class="cl"><span class="cp">%define DATA_SEG   0x0010
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">;---Initialized data------------------------------------------------------------</span>
</span></span><span class="line"><span class="cl"><span class="nf">hello_world_message</span> <span class="nv">dw</span> <span class="mi">12</span>
</span></span><span class="line"><span class="cl"><span class="kd">db</span> <span class="s">&#39;Hello World!&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nf">ticks_message</span> <span class="nv">dw</span> <span class="mi">20</span>
</span></span><span class="line"><span class="cl"><span class="kd">db</span> <span class="s">&#39;System timer ticks: &#39;</span>
</span></span><span class="line"><span class="cl"><span class="nf">scancode_message</span> <span class="nv">dw</span> <span class="mi">20</span>
</span></span><span class="line"><span class="cl"><span class="kd">db</span> <span class="s">&#39;Keyboard scan code: &#39;</span>
</span></span><span class="line"><span class="cl"><span class="nf">task1_message</span> <span class="nv">dw</span> <span class="mi">6</span>
</span></span><span class="line"><span class="cl"><span class="kd">db</span> <span class="s">&#34;Task 1&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nf">task2_message</span> <span class="nv">dw</span> <span class="mi">6</span>
</span></span><span class="line"><span class="cl"><span class="kd">db</span> <span class="s">&#34;Task 2&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nf">task3_message</span> <span class="nv">dw</span> <span class="mi">6</span>
</span></span><span class="line"><span class="cl"><span class="kd">db</span> <span class="s">&#34;Task 3&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">;---Include---------------------------------------------------------------------</span>
</span></span><span class="line"><span class="cl"><span class="cp">%include &#34;kernel/video.asm&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">%include &#34;kernel/idt.asm&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">%include &#34;kernel/isr.asm&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">%include &#34;kernel/tasking.asm&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">;---Code------------------------------------------------------------------------</span>
</span></span><span class="line"><span class="cl"><span class="nl">Kernel:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">lidt</span> <span class="p">[</span><span class="nv">IDTR</span><span class="p">]</span> <span class="c1">; Load our IDTR</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">al</span><span class="p">,</span> <span class="mh">0x80</span>       <span class="c1">; OCW1: Unmask all interrupts at master PIC.</span>
</span></span><span class="line"><span class="cl">    <span class="nf">out</span> <span class="nv">PIC1_DATA</span><span class="p">,</span> <span class="nb">al</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">al</span><span class="p">,</span> <span class="mh">0x80</span>       <span class="c1">; OCW1: Unmask all interrupts at master PIC.</span>
</span></span><span class="line"><span class="cl">    <span class="nf">out</span> <span class="nv">PIC2_DATA</span><span class="p">,</span> <span class="nb">al</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">; Set all segments registers to DATA_SEG.</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ax</span><span class="p">,</span> <span class="nv">DATA_SEG</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ds</span><span class="p">,</span> <span class="nb">ax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">es</span><span class="p">,</span> <span class="nb">ax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">fs</span><span class="p">,</span> <span class="nb">ax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">gs</span><span class="p">,</span> <span class="nb">ax</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ss</span><span class="p">,</span> <span class="nb">ax</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">; Clear the screen.</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rax</span><span class="p">,</span> <span class="mh">0x0020002000200020</span> <span class="c1">; Set background color to black (0) and</span>
</span></span><span class="line"><span class="cl">                                <span class="c1">; character to blank space (20).</span>
</span></span><span class="line"><span class="cl">    <span class="nf">call</span> <span class="nv">Fill_screen</span>            
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">; Print &#34;Hello World!&#34; at the upper right corner.</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">ah</span><span class="p">,</span> <span class="mh">0x1E</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nv">r8</span><span class="p">,</span> <span class="mi">69</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nv">r9</span><span class="p">,</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rsi</span><span class="p">,</span> <span class="nv">hello_world_message</span>
</span></span><span class="line"><span class="cl">    <span class="nf">call</span> <span class="nv">Print</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">; Initialize general stack allocation to the current rsp value.</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="p">[</span><span class="nv">stack_allocation</span><span class="p">],</span> <span class="nb">rsp</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">; Create three tasks</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rsi</span><span class="p">,</span> <span class="nv">Task1</span>
</span></span><span class="line"><span class="cl">    <span class="nf">call</span> <span class="nv">Create_task</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rsi</span><span class="p">,</span> <span class="nv">Task2</span>
</span></span><span class="line"><span class="cl">    <span class="nf">call</span> <span class="nv">Create_task</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="nb">rsi</span><span class="p">,</span> <span class="nv">Task3</span>
</span></span><span class="line"><span class="cl">    <span class="nf">call</span> <span class="nv">Create_task</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="c1">; Set active the first task slot.</span>
</span></span><span class="line"><span class="cl">    <span class="nf">mov</span> <span class="kt">qword</span> <span class="p">[</span><span class="nv">active_task_slot</span><span class="p">],</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">; Task 1: We print system timer ticks and keyboard scan code.</span>
</span></span><span class="line"><span class="cl">    <span class="nl">Task1:</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nb">ah</span><span class="p">,</span> <span class="p">(</span><span class="nv">VGA_COLOR_DARK_GREY</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="nv">VGA_COLOR_WHITE</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r8</span><span class="p">,</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r9</span><span class="p">,</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nb">rsi</span><span class="p">,</span> <span class="nv">task1_message</span>
</span></span><span class="line"><span class="cl">        <span class="nf">Call</span> <span class="nv">Print</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r8</span><span class="p">,</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r9</span><span class="p">,</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nb">rsi</span><span class="p">,</span> <span class="nv">ticks_message</span>
</span></span><span class="line"><span class="cl">        <span class="nf">Call</span> <span class="nv">Print</span>   
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r8</span><span class="p">,</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r9</span><span class="p">,</span> <span class="mi">4</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nb">rsi</span><span class="p">,</span> <span class="nv">scancode_message</span>
</span></span><span class="line"><span class="cl">        <span class="nf">Call</span> <span class="nv">Print</span>  
</span></span><span class="line"><span class="cl">       <span class="nl">.loop:</span>
</span></span><span class="line"><span class="cl">        <span class="c1">; Print system timer ticks.</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r8</span><span class="p">,</span> <span class="mi">21</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r9</span><span class="p">,</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r10</span><span class="p">,</span> <span class="p">[</span><span class="nv">systimer_ticks</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="nf">call</span> <span class="nv">Print_hex</span>
</span></span><span class="line"><span class="cl">        <span class="c1">; Print keyboard scan code.</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r8</span><span class="p">,</span> <span class="mi">21</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r9</span><span class="p">,</span> <span class="mi">4</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r10</span><span class="p">,</span> <span class="p">[</span><span class="nv">keyboard_scancode</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="nf">call</span> <span class="nv">Print_hex</span>
</span></span><span class="line"><span class="cl">    <span class="nf">jmp</span> <span class="nv">Task1.loop</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">; Task 2: We set r10 to 0 and we increase it by one in a loop.</span>
</span></span><span class="line"><span class="cl">    <span class="nl">Task2:</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nb">ah</span><span class="p">,</span> <span class="p">(</span><span class="nv">VGA_COLOR_GREEN</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="nv">VGA_COLOR_WHITE</span> 
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r8</span><span class="p">,</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r9</span><span class="p">,</span> <span class="mi">6</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nb">rsi</span><span class="p">,</span> <span class="nv">task2_message</span>
</span></span><span class="line"><span class="cl">        <span class="nf">Call</span> <span class="nv">Print</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r8</span><span class="p">,</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r9</span><span class="p">,</span> <span class="mi">7</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r10</span><span class="p">,</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">       <span class="nl">.loop:</span>
</span></span><span class="line"><span class="cl">            <span class="nf">inc</span> <span class="nv">r10</span>
</span></span><span class="line"><span class="cl">            <span class="c1">; Print number of ticks</span>
</span></span><span class="line"><span class="cl">            <span class="nf">Call</span> <span class="nv">Print_hex</span>
</span></span><span class="line"><span class="cl">        <span class="nf">jmp</span> <span class="nv">Task2.loop</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">; Task 3: We set r10 to 0xFFFFFFFFFFFFFFFF and we decrease it by one in a loop.</span>
</span></span><span class="line"><span class="cl">    <span class="nl">Task3:</span> 
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nb">ah</span><span class="p">,</span> <span class="p">(</span><span class="nv">VGA_COLOR_MAGENTA</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="nv">VGA_COLOR_WHITE</span> 
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r8</span><span class="p">,</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r9</span><span class="p">,</span> <span class="mi">9</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nb">rsi</span><span class="p">,</span> <span class="nv">task3_message</span>
</span></span><span class="line"><span class="cl">        <span class="nf">Call</span> <span class="nv">Print</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r8</span><span class="p">,</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r9</span><span class="p">,</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl">        <span class="nf">mov</span> <span class="nv">r10</span><span class="p">,</span> <span class="mh">0xFFFFFFFFFFFFFFFF</span>
</span></span><span class="line"><span class="cl">       <span class="nl">.loop:</span>   
</span></span><span class="line"><span class="cl">            <span class="nf">dec</span> <span class="nv">r10</span>
</span></span><span class="line"><span class="cl">            <span class="c1">; Print number of ticks</span>
</span></span><span class="line"><span class="cl">            <span class="nf">Call</span> <span class="nv">Print_hex</span>
</span></span><span class="line"><span class="cl">        <span class="nf">jmp</span> <span class="nv">Task3.loop</span></span></span></code></pre></div>

<h1 id="runningcode"><span lang="en">Running our code</span><span lang="el">Εκτέλεση του κώδικά μας</span></h1>

<p lang="en">We can test our code very easily using an emulator like <a href="https://en.wikipedia.org/wiki/QEMU" target="_blank">QEMU</a>:</p>
<p lang="el">Μπορούμε να δοκιμάσουμε τον κώδικά μας πολύ εύκολα, χρησιμοποιώντας έναν εξομοιωτή όπως ο <a href="https://en.wikipedia.org/wiki/QEMU" target="_blank">QEMU</a>:</p>

<div class="bg-black"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> make
</span></span><span class="line"><span class="cl"><span class="gp">$</span> qemu-system-x86_64 -drive <span class="nv">format</span><span class="o">=</span>raw,file<span class="o">=</span>os.bin
</span></span></code></pre></div></div>

<p lang="en">Notice that, even though all the tasks use the same registers (e.g. the r10), nevertheless each task does its job normally and it's not affected by the constant task/context switching.</p>
<p lang="el">Παρατηρήστε ότι, αν και όλες οι διεργασίες χρησιμοποιούν τους ίδιους καταχωρητές (λ.χ. τον r10), παρόλα αυτά η καθεμία επιτελεί το έργο της κανονικά και δεν επηρεάζεται από τη συνεχή εναλλαγή διεργασιών/πλαισίου.</p>

<p><img class="centered" src="/images/os_multitasking.jpg" alt="Multitasking example" title="Multitasking example"/></p>

<h1 id="fullcode"><span lang="en">Full code</span><span lang="el">Πλήρης κώδικας</span></h1>

<p lang="en">You can download the full code from here: <a href="https://github.com/Alamot/code-snippets/tree/master/os/part4" target="_blank">code</a></p>
<p lang="el">Μπορείτε να κατεβάσετε τον πλήρη κώδικα απο εδώ: <a href="https://github.com/Alamot/code-snippets/tree/master/os/part4" target="_blank">κώδικας</a></p> 

<h1 id="reference"><span lang="en">References</span><span lang="el">Αναφορές</span></h1>

<ul>
<li><a href="https://wiki.osdev.org/" target="_blank">https://wiki.osdev.org/</a></li>
</ul>

        </div>

        <aside>
          <div class="p-share centered">
            <a href="https://www.buymeacoffee.com/alamot" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-coffee"></i></a>
            <a href="http://www.facebook.com/sharer.php?src=bm&u=https%3a%2f%2falamot.github.io%2fos_tasking%2f&t=How%20to%20write%20your%20own%20Operating%20System%20%28x86_64%29%3a%20Multitasking" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-facebook"></i></a>
            <a lang="en" href="http://twitter.com/intent/tweet?url=https%3a%2f%2falamot.github.io%2fos_tasking%2f&text=How%20to%20write%20your%20own%20Operating%20System%20%28x86_64%29%3a%20Multitasking&tw_p=tweetbutton" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-twitter"></i></a>
            <a lang="el" href="http://twitter.com/intent/tweet?url=https%3a%2f%2falamot.github.io%2fos_tasking%2f&text=%ce%a0%cf%89%cf%82%20%ce%bd%ce%b1%20%ce%b3%cf%81%ce%ac%cf%88%ce%b5%cf%84%ce%b5%20%cf%84%ce%bf%20%ce%b4%ce%b9%ce%ba%cf%8c%20%cf%83%ce%b1%cf%82%20%ce%9b%ce%b5%ce%b9%cf%84%ce%bf%cf%85%cf%81%ce%b3%ce%b9%ce%ba%cf%8c%20%ce%a3%cf%8d%cf%83%cf%84%ce%b7%ce%bc%ce%b1%20%28x86_64%29%3a%20%ce%a0%ce%bf%ce%bb%cf%85%ce%b4%ce%b9%ce%b5%cf%81%ce%b3%ce%b1%cf%83%ce%af%ce%b1&tw_p=tweetbutton" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-twitter"></i></a>
            <a lang="en" href="http://pinterest.com/pin/create/link/?url==https%3a%2f%2falamot.github.io%2fos_tasking%2f&description=How%20to%20write%20your%20own%20Operating%20System%20%28x86_64%29%3a%20Multitasking&media=https://alamot.github.io/images/os4.jpg" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-pinterest-p"></i></a>
            <a lang="el" href="http://pinterest.com/pin/create/link/?url==https%3a%2f%2falamot.github.io%2fos_tasking%2f&description=%ce%a0%cf%89%cf%82%20%ce%bd%ce%b1%20%ce%b3%cf%81%ce%ac%cf%88%ce%b5%cf%84%ce%b5%20%cf%84%ce%bf%20%ce%b4%ce%b9%ce%ba%cf%8c%20%cf%83%ce%b1%cf%82%20%ce%9b%ce%b5%ce%b9%cf%84%ce%bf%cf%85%cf%81%ce%b3%ce%b9%ce%ba%cf%8c%20%ce%a3%cf%8d%cf%83%cf%84%ce%b7%ce%bc%ce%b1%20%28x86_64%29%3a%20%ce%a0%ce%bf%ce%bb%cf%85%ce%b4%ce%b9%ce%b5%cf%81%ce%b3%ce%b1%cf%83%ce%af%ce%b1&media=https://alamot.github.io/images/os4.jpg" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-pinterest-p"></i></a>
          </div>
        </aside>
      </article>
      
      <section id="posts-section">
        <header lang="en"><h3>See also...</h3></header>
        <header lang="el"><h3>Δείτε επίσης...</h3></header>
        <div>
          
          
          
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
            <article class="li col-sm-6 col-md-4">
  <a href="https://alamot.github.io/os_isr/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/os3.jpg);"></div>
    </div>
    <footer>
      <h3 class="title" lang="en">How to write your own Operating System (x86_64): Interrupts</h3>
      <h3 class="title" lang="el">Πως να γράψετε το δικό σας Λειτουργικό Σύστημα (x86_64): Διακοπές</h3>
      <i class="fa fa-calendar"></i>
      <time lang="en">21 Apr 2022</time>
      <time lang="el">21 Απρ 2022</time>
    </footer>
  </a>
</article>

           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
            <article class="li col-sm-6 col-md-4">
  <a href="https://alamot.github.io/os_stage2/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/os2.jpg);"></div>
    </div>
    <footer>
      <h3 class="title" lang="en">How to write your own Operating System (x86_64): Bootloader, 2nd Stage (long mode)</h3>
      <h3 class="title" lang="el">Πως να γράψετε το δικό σας Λειτουργικό Σύστημα (x86_64): Εκκινητής, 2o Στάδιο (μακρά κατάσταση)</h3>
      <i class="fa fa-calendar"></i>
      <time lang="en">11 Apr 2022</time>
      <time lang="el">11 Απρ 2022</time>
    </footer>
  </a>
</article>

           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
            <article class="li col-sm-6 col-md-4">
  <a href="https://alamot.github.io/os_stage1/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/os1.jpg);"></div>
    </div>
    <footer>
      <h3 class="title" lang="en">How to write your own Operating System (x86_64): Bootloader, 1st Stage</h3>
      <h3 class="title" lang="el">Πως να γράψετε το δικό σας Λειτουργικό Σύστημα (x86_64): Εκκινητής, 1o Στάδιο</h3>
      <i class="fa fa-calendar"></i>
      <time lang="en">10 Apr 2022</time>
      <time lang="el">10 Απρ 2022</time>
    </footer>
  </a>
</article>

           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
            <article class="li col-sm-6 col-md-4">
  <a href="https://alamot.github.io/epub_cover/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/openbook.jpg);"></div>
    </div>
    <footer>
      <h3 class="title" lang="en">How to read the cover image from an EPUB file in Python</h3>
      <h3 class="title" lang="el">Πως να διαβάσετε την εικόνα εξωφύλλου από ένα αρχείο EPUB σε Python</h3>
      <i class="fa fa-calendar"></i>
      <time lang="en">10 May 2020</time>
      <time lang="el">10 Μαϊ 2020</time>
    </footer>
  </a>
</article>

           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
            <article class="li col-sm-6 col-md-4">
  <a href="https://alamot.github.io/get_outlook_rules/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/flying_mail.jpg);"></div>
    </div>
    <footer>
      <h3 class="title" lang="en">How to collect Outlook rules using Powershell</h3>
      <h3 class="title" lang="el">Πως να συλλέξετε τους κανόνες του Outlook χρησιμοποιώντας Powershell</h3>
      <i class="fa fa-calendar"></i>
      <time lang="en">20 May 2022</time>
      <time lang="el">20 Μαϊ 2022</time>
    </footer>
  </a>
</article>

           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
            <article class="li col-sm-6 col-md-4">
  <a href="https://alamot.github.io/mssql_shell/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/dbs.jpg);"></div>
    </div>
    <footer>
      <h3 class="title" lang="en">MSSQL shell with file upload capability</h3>
      <h3 class="title" lang="el">MSSQL κέλυφος με δυνατότητα ανεβάσματος αρχείων</h3>
      <i class="fa fa-calendar"></i>
      <time lang="en">13 Apr 2018</time>
      <time lang="el">13 Απρ 2018</time>
    </footer>
  </a>
</article>

           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
            <article class="li col-sm-6 col-md-4">
  <a href="https://alamot.github.io/test_encodings/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/encodings.jpg);"></div>
    </div>
    <footer>
      <h3 class="title" lang="en">How to determine the character encoding of a text file</h3>
      <h3 class="title" lang="el">Πως να αναγνωρίσετε την κωδικοποίηση χαρακτήρων ενός αρχείου κειμένου</h3>
      <i class="fa fa-calendar"></i>
      <time lang="en">21 Oct 2016</time>
      <time lang="el">21 Οκτ 2016</time>
    </footer>
  </a>
</article>

           
          
           
           
           
           
            <article class="li col-sm-6 col-md-4">
  <a href="https://alamot.github.io/opencl_fractals/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/fractals.jpg);"></div>
    </div>
    <footer>
      <h3 class="title" lang="en">OpenCL Fractals</h3>
      <h3 class="title" lang="el">OpenCL Κλασματομορφές (Φράκταλς)</h3>
      <i class="fa fa-calendar"></i>
      <time lang="en">07 Oct 2023</time>
      <time lang="el">07 Οκτ 2023</time>
    </footer>
  </a>
</article>

           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
            <article class="li col-sm-6 col-md-4">
  <a href="https://alamot.github.io/nl80211/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/wifi-sign.jpg);"></div>
    </div>
    <footer>
      <h3 class="title" lang="en">How to get info for the wireless interface using nl80211 in C</h3>
      <h3 class="title" lang="el">Πως να λάβετε πληροφορίες για την ασύρματη διεπαφή χρησιμοποιώντας την nl80211 στη C</h3>
      <i class="fa fa-calendar"></i>
      <time lang="en">09 Oct 2016</time>
      <time lang="el">09 Οκτ 2016</time>
    </footer>
  </a>
</article>

           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
            <article class="li col-sm-6 col-md-4">
  <a href="https://alamot.github.io/shutdown_manager_plain/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/shutdown_button.jpg);"></div>
    </div>
    <footer>
      <h3 class="title" lang="en">Creation of a shutdown GUI using Gtk in Python</h3>
      <h3 class="title" lang="el">Δημιουργία μιας γραφικής διεπαφής κλεισίματος με τη χρήση Gtk σε Python</h3>
      <i class="fa fa-calendar"></i>
      <time lang="en">21 Jul 2016</time>
      <time lang="el">21 Ιουλ 2016</time>
    </footer>
  </a>
</article>

           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
            <article class="li col-sm-6 col-md-4">
  <a href="https://alamot.github.io/kivy_popup/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/kivy.jpg);"></div>
    </div>
    <footer>
      <h3 class="title" lang="en">How to build a responsive popup window with scrolling capability in Kivy</h3>
      <h3 class="title" lang="el">Πως να φτιάξετε ένα ευέλικτο αναδυόμενο παράθυρο με δυνατότητα κύλισης στην Kivy</h3>
      <i class="fa fa-calendar"></i>
      <time lang="en">19 Feb 2014</time>
      <time lang="el">19 Φεβ 2014</time>
    </footer>
  </a>
</article>

           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
            <article class="li col-sm-6 col-md-4">
  <a href="https://alamot.github.io/winrm_shell/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/winrm.jpg);"></div>
    </div>
    <footer>
      <h3 class="title" lang="en">WinRM shell (a.k.a. PowerShell Remoting) with file upload capability</h3>
      <h3 class="title" lang="el">WinRM κέλυφος (PowerShell Remoting) με δυνατότητα ανεβάσματος αρχείων</h3>
      <i class="fa fa-calendar"></i>
      <time lang="en">09 Apr 2018</time>
      <time lang="el">09 Απρ 2018</time>
    </footer>
  </a>
</article>

           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
            <article class="li col-sm-6 col-md-4">
  <a href="https://alamot.github.io/sutherland_hodgman_algorithm/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/Sutherland_Hodgman_3D.jpg);"></div>
    </div>
    <footer>
      <h3 class="title" lang="en">3D visualization of Sutherland-Hodgman algorithm (polygon clipping)</h3>
      <h3 class="title" lang="el">Τρισδιάστατη οπτικοποίηση του αλγορίθμου Sutherland-Hodgman (αποκοπή πολυγώνων)</h3>
      <i class="fa fa-calendar"></i>
      <time lang="en">25 Apr 2016</time>
      <time lang="el">25 Απρ 2016</time>
    </footer>
  </a>
</article>

           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
            <article class="li col-sm-6 col-md-4">
  <a href="https://alamot.github.io/web_file_browser/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/web_file_browser.jpg);"></div>
    </div>
    <footer>
      <h3 class="title" lang="en">How to write your own Web File Browser</h3>
      <h3 class="title" lang="el">Πως να γράψετε τον δικό σας Διαδικτυακό Περιηγητή Αρχείων</h3>
      <i class="fa fa-calendar"></i>
      <time lang="en">11 May 2022</time>
      <time lang="el">11 Μαϊ 2022</time>
    </footer>
  </a>
</article>

           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
            <article class="li col-sm-6 col-md-4">
  <a href="https://alamot.github.io/fast_commit_push/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/binary_flow.jpg);"></div>
    </div>
    <footer>
      <h3 class="title" lang="en">Git &amp; Mercurial: How to commit-push fast and easily</h3>
      <h3 class="title" lang="el">Git &amp; Mercurial: Πως να κάνετε commit-push γρήγορα και εύκολα</h3>
      <i class="fa fa-calendar"></i>
      <time lang="en">17 Oct 2016</time>
      <time lang="el">17 Οκτ 2016</time>
    </footer>
  </a>
</article>

           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
            <article class="li col-sm-6 col-md-4">
  <a href="https://alamot.github.io/oracle/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/oracle.jpg);"></div>
    </div>
    <footer>
      <h3 class="title" lang="en">Ask and you shall receive</h3>
      <h3 class="title" lang="el">Ζήτα και θα λάβεις</h3>
      <i class="fa fa-calendar"></i>
      <time lang="en">04 May 2019</time>
      <time lang="el">04 Μαϊ 2019</time>
    </footer>
  </a>
</article>

           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
            <article class="li col-sm-6 col-md-4">
  <a href="https://alamot.github.io/path_traversal_archiver/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/path.jpg);"></div>
    </div>
    <footer>
      <h3 class="title" lang="en">Path-traversal archiver</h3>
      <h3 class="title" lang="el">Αρχειοθέτης με διάσχιση διαδρομής</h3>
      <i class="fa fa-calendar"></i>
      <time lang="en">14 May 2019</time>
      <time lang="el">14 Μαϊ 2019</time>
    </footer>
  </a>
</article>

           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
            <article class="li col-sm-6 col-md-4">
  <a href="https://alamot.github.io/shutdown_manager_transparent/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/transparent_shutdown.jpg);"></div>
    </div>
    <footer>
      <h3 class="title" lang="en">Creation of a transparent shutdown GUI using Gtk and Cairo in Python</h3>
      <h3 class="title" lang="el">Δημιουργία μιας διαφανούς γραφικής διεπαφής κλεισίματος με τη χρήση Gtk και Cairo σε Python</h3>
      <i class="fa fa-calendar"></i>
      <time lang="en">19 Sep 2016</time>
      <time lang="el">19 Σεπ 2016</time>
    </footer>
  </a>
</article>

           
          
        </div>
      </section>
      
    </div>
   </div> 
  </div>


<footer class="l-footer">
<span class="copyleft">&copy;</span>
<span lang="en">&nbsp; Antonios Tsolis &nbsp; </span>
<span lang="el">&nbsp; Αντώνιος Τσώλης &nbsp; </span>
<script>
  function email(starting,server,firstname,lastname,subject,body,closing) {
    document.write(starting); document.write(lastname); document.write("." + firstname); document.write("@" + server);if (Boolean(subject)) { document.write("?subject=" + subject + "&body=" + body); }
    document.write(closing); }
  email("<a class='mymail' aria-label='Send me an email' href='mailto:", "gmail.com", "antonios", "tsolis", "", "","' target='_blank'><i class='fa fa-envelope-o' aria-hidden='true'></i></a>");
</script>
</footer>
<script async src="https://alamot.github.io/js/jq-btsp-lunr.min.js" onload="init()"></script>
<script>
short_months = {
  "en": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
  "el": ["Ιαν", "Φεβ", "Μαρ", "Απρ", "Μαϊ", "Ιουν", "Ιουλ", "Αυγ", "Σεπ", "Οκτ", "Νοε", "Δεκ"]
}
function init () {
$(document).ready(function(){
  $("#lang-selector>ul>li>a").click(function(){
    var langid = this.id;
    var selText = this.text;
    document.getElementById('mainbody').setAttribute('class', langid);
    document.getElementById('mainbody').setAttribute('lang', langid);
    localStorage.setItem('language', langid);
    $("#lang-selector>a").html(selText+' <i class="fa fa-caret-down" aria-hidden="true"></i>');
  });

  $("#TableOfContents a, #content-selector a").on('click', function(e) {
    var hash = this.hash;
    if (hash) {
      e.preventDefault();
      $('html, body').animate({scrollTop: $(hash).offset().top}, 1300, function(){
        window.location.hash = hash;
      });
    }  
  });

  
});}
</script>
<script>
(function(a){var b=function(b,h,n){function d(a){if(f.body)return a();setTimeout(function(){d(a)})}function k(){c.addEventListener&&c.removeEventListener("load",k);c.media=n||"all"}var f=a.document,c=f.createElement("link"),g;if(h)g=h;else{var e=(f.body||f.getElementsByTagName("head")[0]).childNodes;g=e[e.length-1]}var m=f.styleSheets;c.rel="stylesheet";c.href=b;c.media="only x";d(function(){g.parentNode.insertBefore(c,h?g:g.nextSibling)});var l=function(a){for(var b=c.href,d=m.length;d--;)if(m[d].href===
b)return a();setTimeout(function(){l(a)})};c.addEventListener&&c.addEventListener("load",k);c.onloadcssdefined=l;l(k);return c};"undefined"!==typeof exports?exports.loadCSS=b:a.loadCSS=b})("undefined"!==typeof global?global:this);
(function(a){if(a.loadCSS){var b=loadCSS.relpreload={};b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(h){return!1}};b.poly=function(){for(var b=a.document.getElementsByTagName("link"),e=0;e<b.length;e++){var d=b[e];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d),d.rel=null)}};if(!b.support()){b.poly();var e=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){a.clearInterval(e)});a.attachEvent&&
a.attachEvent("onload",function(){a.clearInterval(e)})}}})(this);
</script>
</body>
</html>

