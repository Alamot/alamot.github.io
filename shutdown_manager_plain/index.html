<!DOCTYPE html>
<html>
  <head>
    <script>
    function email(starting,server,firstname,lastname,subject,body,closing) {
      document.write(starting);
      document.write(":" + lastname);
      document.write("." + firstname);
      document.write("@");
      document.write(server + "?subject=" + subject + "&body=" + body + "' target='_blank'>");
      document.write(closing); }
    </script>
    <meta charset="utf-8">
    <meta name="generator" content="Hugo 0.17-DEV" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
        
    <link rel="stylesheet" href="https://alamot.github.io/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://alamot.github.io/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://alamot.github.io/css/styles.css">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://alamot.github.io/index.xml">
    
    
    
      <title>Creation of a shutdown GUI using Gtk in Python - The Portal of Knowledge</title>
      <meta property='og:title' content="Creation of a shutdown GUI using Gtk in Python - The Portal of Knowledge">
      <meta property="og:type" content="article">
      <meta name="description" content="Many window managers in linux are lacking a graphical shutdown interface. Here, we show how we can implement one, quite easily, using gtk and python. Πολλοί διαχειριστές παραθύρων στο linux δε διαθέτουν μια γραφική διεπαφή χρήστη για τις επιλογές κλεισίματος. Εδώ, δείχνουμε πως μπορούμε να υλοποιήσουμε έναν, αρκετά εύκολα, χρησιμοποιώντας gtk και python.">
      <meta property="og:description" content="Many window managers in linux are lacking a graphical shutdown interface. Here, we show how we can implement one, quite easily, using gtk and python. Πολλοί διαχειριστές παραθύρων στο linux δε διαθέτουν μια γραφική διεπαφή χρήστη για τις επιλογές κλεισίματος. Εδώ, δείχνουμε πως μπορούμε να υλοποιήσουμε έναν, αρκετά εύκολα, χρησιμοποιώντας gtk και python.">
      <meta property="og:image" content="https://alamot.github.io/images/shutdown_button.jpg">
      <meta property="og:image:width" content="768" />
      <meta property="og:image:height" content="384" />
    
    <meta property="og:url" content="https://alamot.github.io/shutdown_manager_plain/">


<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage":{
      "@type":"WebPage",
      "@id":"https:\/\/alamot.github.io\/"
    },
    "headline": "Creation of a shutdown GUI using Gtk in Python |  ",
    "image": {
      "@type": "ImageObject",
      "url": "",
      "height": 700,
      "width": 700
    },
    "datePublished": "2016-07-21T00:00:00JST",
    "dateModified": "2016-07-21T00:00:00JST",
    "author": {
      "@type": "Person",
      "name": "",
      "image": "https:\/\/alamot.github.io\/images/logo.png"
    },
    "publisher": {
      "@type": "Organization",
      "name": "",
      "logo": {
        "@type": "ImageObject",
        "url": "https:\/\/alamot.github.io\/images/logo.png",
        "height": 60,
        "width": 60
      }
    },
    "description": ""
  }
</script>
</head>
<body id="mainbody" class="en" lang="en">
<nav class="navbar navbar-default navbar-fixed-top">
<div class="container-fluid">
  
   <ul class="nav nav-pills pull-left navbar-btn">
   <li>
    <div class="btn-group">
    <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span lang="en">Contents</span><span lang="el">Περιεχόμενα</span><span class="caret"></span>
    </button>
    <ul id="content-selector" class="dropdown-menu scroll-menu">
       <li><a href="#title"><span lang="en">Start</span><span lang="el">Αρχή</span></a></li>
       
       
       
       
       
        
 
<li><a href="#span-lang-en-source-code-span-span-lang-el-πηγαίος-κώδικας-span"><span lang="en">Source code</span><span lang="el">Πηγαίος κώδικας</span></a></li>
 
 
       <li><a href="#posts-section"><span lang="en">See also</span><span lang="el">Δείτε επίσης</span></a></li>
    </ul>
    </div>
    </li>
   </ul>
  
   
  <ul class="nav nav-pills">
      <li><a class="p-logo" href="https://alamot.github.io/"><i class="fa fa-home" aria-hidden="true"></i> <span class="hidden768" lang="en">The Portal of Knowledge</span><span class="hidden768" lang="el">Η Πύλη της Γνώσης</span></a></li>
  </ul>
  
  <ul class="nav nav-pills pull-right navbar-btn"> 
    <li>
      <div class="btn-group">
      <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Language<span class="caret"></span>
    </button>
    <ul id="language-selector" class="dropdown-menu">
       <li><a id="en" href="#">English</a></li>
       <li><a id="el" href="#">Ελληνικά</a></li>
    </ul>
    </div>
    </li>  
  </ul>
</div>
</nav>


<div class="container-fluid">
  <div class="row">
    <div class="col-md-12">
      <article class="single">
        <div class="image" style="background-image: url(https://alamot.github.io/images/shutdown_button.jpg);"></div>
        <div class="body">
          <div lang="en">
            <h1 id="title" class="title">Creation of a shutdown GUI using Gtk in Python</h1>
            <i class="fa fa-calendar"></i>  
            <time lang="en">2016-07-21</time>
            &middot; <i class="fa fa-folder-open-o" aria-hidden="true"></i>
            
              <a class="label label-success" href='https://alamot.github.io/categories/coding'>Coding</a>
            
            &middot; <i class="fa fa-tags"></i>
            
              <a class="label label-primary" href='https://alamot.github.io/tags/linux'>linux</a>
            
              <a class="label label-primary" href='https://alamot.github.io/tags/gtk'>gtk</a>
            
              <a class="label label-primary" href='https://alamot.github.io/tags/python'>python</a>
            
          </div>
          <div lang="el">
            <h1 class="title">Δημιουργία μιας γραφικής διεπαφής κλεισίματος με τη χρήση Gtk σε Python</h1>
            <i class="fa fa-calendar"></i> 
            <time lang="el">2016-07-21</time>
            &middot; <i class="fa fa-folder-open-o" aria-hidden="true"></i>
            
              <a class="label label-success" href='https://alamot.github.io/%CE%BA%CE%B1%CF%84%CE%B7%CE%B3%CE%BF%CF%81%CE%B9%CE%B5%CF%82/%CF%80%CF%81%CE%BF%CE%B3%CF%81%CE%B1%CE%BC%CE%BC%CE%B1%CF%84%CE%B9%CF%83%CE%BC%CF%8C%CF%82'>Προγραμματισμός</a>
            
            &middot; <i class="fa fa-tags"></i>
            
              <a class="label label-primary" href='https://alamot.github.io/%CE%B5%CF%84%CE%B9%CE%BA%CE%B5%CF%84%CE%B5%CF%82/linux'>linux</a>
            
              <a class="label label-primary" href='https://alamot.github.io/%CE%B5%CF%84%CE%B9%CE%BA%CE%B5%CF%84%CE%B5%CF%82/gtk'>gtk</a>
            
              <a class="label label-primary" href='https://alamot.github.io/%CE%B5%CF%84%CE%B9%CE%BA%CE%B5%CF%84%CE%B5%CF%82/python'>python</a>
            
          </div>

         
        
        

<p lang="en">Many window managers in Linux are lacking a graphical «shutdown» interface. Here, we show how we can implement one, quite easily, using gtk and python. In a follow-up <a href="/shutdown_manager_plain/">article</a>, we show how we can create a <em>transparent</em> GUI using Cairo.</p>
<p lang="el">Πολλοί διαχειριστές παραθύρων στο Linux δε διαθέτουν μια γραφική διεπαφή «κλεισίματος». Εδώ, θα δείξουμε πώς μπορείτε να υλοποιήσετε μία, αρκετά εύκολα, χρησιμοποιώντας gtk και python. Σε επόμενο <a href="/shutdown_manager_transparent/">άρθρο</a> μας, δείχνουμε πώς μπορείτε να δημιουργήσετε μια <em>διάφανη</em> διεπαφή χρήστη χρησιμοποιώντας Cairo.</p>

<figure>
<img class="floatcenter border" src="/images/shutdown_gui_3x3_plain.png" alt="3x3 square shutdown GUI">
<figcaption lang="en">
You can find free icons for every use on <a href="https://openclipart.org" target="_blank">openclipart.org</a>
</figcaption>
<figcaption lang="el">
Μπορείτε να βρείτε δωρεάν εικονίδια για κάθε χρήση στο <a href="https://openclipart.org" target="_blank">openclipart.org</a>
</figcaption>
</figure>

<p lang="en">First, let's add the necessary imports:</p>
<p lang="el">Πρώτα από όλα, ας προσθέσουμε τα απαραίτητα import:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">gtk</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
</code></pre></div>


<p lang="en">We define a <em>get_resource_path</em> function to help us find the path of our icons in the system:</p>
<p lang="el">Ορίζουμε μια συνάρτηση <em>get_resource_path</em> για να μας βοηθήσει να βρούμε την τοποθεσία των εικονιδίων μας στο σύστημα:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span></span><span class="k">def</span> <span class="nf">get_resource_path</span><span class="p">(</span><span class="n">rel_path</span><span class="p">):</span>
    <span class="n">dir_of_py_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">)</span>
    <span class="n">rel_path_to_resource</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dir_of_py_file</span><span class="p">,</span> <span class="n">rel_path</span><span class="p">)</span>
    <span class="n">abs_path_to_resource</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">rel_path_to_resource</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">abs_path_to_resource</span>
</code></pre></div>


<p lang="en">Next, we define our SystemDialog class (inherits from gtk.Window):</p>
<p lang="el">Στη συνέχεια, ορίζουμε την κλάση SystemDialog (κληρονομεί από την gtk.Window):</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span></span><span class="k">class</span> <span class="nc">SystemDialog</span> <span class="p">(</span><span class="n">gtk</span><span class="o">.</span><span class="n">Window</span><span class="p">):</span>
    <span class="o">...</span>
</code></pre></div>


<p lang="en">Inside the class we define the __init__ (do <strong>not</strong> forget to call the super):</p>
<p lang="el">Μέσα στην κλάση μας ορίζουμε την __init__ (<strong>μην</strong> ξεχάσετε να καλέσετε την super):</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">SystemDialog</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
    <span class="o">...</span>
</code></pre></div>


<p lang="en">Inside the __init__ we define a dictionary with label/command key-value pairs. The reason we use an <em>OrderedDict</em> is that the simple <em>dict</em> in python does not keep the order of the keys but we do not want our buttons to appear in arbitrary order. Keep in mind that you have to edit the button commands according to your system and your needs.</p>
<p lang="el">Μέσα στην __init__ ορίζουμε ένα λεξικό με ζευγάρια από ετικέτες και εντολές. Ο λόγος που χρησιμοποιούμε ένα <em>OrderedDict</em> είναι επειδή το απλό <em>dict</em> στην Python δεν συγκρατεί τη σειρά των λημμάτων (=κλειδιών) αλλά εμείς δε θέλουμε τα κουμπιά μας να εμφανίζονται με αυθαίρετη σειρά. Σημειώστε ότι θα πρέπει να τροποποιήσετε τις εντολές που αντιστοιχούν στα κουμπιά ανάλογα με το σύστημα σάς και τις ανάγκες σάς.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span></span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([</span>
    <span class="p">(</span><span class="s2">&quot;Cancel&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;Lock&quot;</span><span class="p">,</span> <span class="s2">&quot;slock &amp;&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;Restart WM&quot;</span><span class="p">,</span> <span class="s2">&quot;sudo killall dwm &amp;&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;Sleep&quot;</span><span class="p">,</span> <span class="s2">&quot;sudo pm-suspend &amp;&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;Hibernate&quot;</span><span class="p">,</span> <span class="s2">&quot;sudo pm-hibernate &amp;&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;Sleep + Hibernate&quot;</span><span class="p">,</span> <span class="s2">&quot;sudo pm-suspend-hybrid &amp;&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;Logout&quot;</span><span class="p">,</span> <span class="s2">&quot;sudo killall X &amp;&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;Reboot&quot;</span><span class="p">,</span> <span class="s2">&quot;sudo reboot &amp;&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;Shutdown&quot;</span><span class="p">,</span> <span class="s2">&quot;sudo poweroff &amp;&quot;</span><span class="p">)])</span>
    
<span class="bp">self</span><span class="o">.</span><span class="n">buttons</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div>


<p lang="en">We make our window borderless, undecorated, centered on screen and we keep it on top.</p>
<p lang="el">Ρυθμίζουμε το παράθυρό μας να μην έχει οριογραμμές ή άλλα διακοσμητικά στοιχεία, να είναι κεντραρισμένο στην οθόνη και να παραμένει πάνω από τα άλλα παράθυρα.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span></span><span class="bp">self</span><span class="o">.</span><span class="n">set_border_width</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">set_decorated</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">gtk</span><span class="o">.</span><span class="n">WIN_POS_CENTER</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">set_keep_above</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div>


<p lang="en">We define one <span style="color:blue">vertical box</span> and three <span style="color:red">horizontal boxes</span>. The vertical box will contain and align vertically the 3 horizontal boxes while each horizontal box while keep and align horizontally 3 of our buttons. Therefore, in the end, we will have a nice 3x3 button square, like this:</p>
<p lang="el">Ορίζουμε ένα <span style="color:blue">κάθετο κουτί</span> και τρία <span style="color:red">οριζόντια κουτιά</span>. Το κάθετο κουτί θα εμπεριέχει και θα στοιχίζει κάθετα τα 3 οριζόντια κουτιά ενώ κάθε οριζόντιο κουτί θα περιέχει και θα στοιχίζει οριζόντια 3 από τα κουμπιά μας. Οπότε, τελικά, θα έχουμε ένα ωραίο τετράγωνο 3x3 γεμάτο με κουμπιά, όπως αυτό:</p>
<table class="floatright" style="outline:5px solid blue; outline-offset: 3px;">
<tr style="outline:2px solid red; outline-offset:-3px;"><td><i class="fa fa-picture-o lgfont"></i></td><td><i class="fa fa-picture-o lgfont"></i></td><td><i class="fa fa-picture-o lgfont"></i></td></tr>
<tr style="outline:2px solid red; outline-offset:-3px;"><td><i class="fa fa-picture-o lgfont"></td><td><i class="fa fa-picture-o lgfont"></td><td><i class="fa fa-picture-o lgfont"></td></tr>
<tr style="outline:2px solid red; outline-offset:-3px;"><td><i class="fa fa-picture-o lgfont"></td><td><i class="fa fa-picture-o lgfont"></td><td><i class="fa fa-picture-o lgfont"></td></tr>
</table>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span></span><span class="bp">self</span><span class="o">.</span><span class="n">vbox</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">hboxes</span> <span class="o">=</span> <span class="p">[</span><span class="n">gtk</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
               <span class="n">gtk</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
               <span class="n">gtk</span><span class="o">.</span><span class="n">HBox</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]</span>
</code></pre></div>

<p lang="en">The <em>True</em> values is about the homogenous (i.e. the same) size of the children and <em>5</em> is the amount of space between them.</p>
<p lang="el">Οι τιμές <em>True</em> έχουν να κάνουν με την ισόποση κατανομή του χώρου μεταξύ των περιεχομένων, ενώ το <em>5</em> είναι το κενό διάστημα ανάμεσά τους.</p>

<p lang="en">Now, let's create our buttons, put some icons and labels on them, connect their click event with a callback event handler and pack them inside the empty horizontal boxes (3 buttons in each horizontal box).</p>
<p lang="el">Τώρα, ας δημιουργήσουμε τα κουμπιά μας, ας βάλουμε μερικές ετικέτες και εικονίδια πάνω τους, ας συνδέσουμε το πάτημά τους με έναν επανακαλούμενο χειριστή συμβάντων και ας τα πακετάρουμε μέσα στα άδεια οριζόντια κουτιά (3 κουμπιά σε κάθε οριζόντιο κουτί).</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span></span><span class="n">c</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">boxIndex</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
    <span class="n">ico</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">Image</span><span class="p">()</span>
    <span class="n">ico</span><span class="o">.</span><span class="n">set_from_file</span><span class="p">(</span><span class="n">get_resource_path</span><span class="p">(</span><span class="s2">&quot;images/&quot;</span><span class="o">+</span><span class="n">label</span><span class="o">+</span><span class="s2">&quot;.png&quot;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">label</span><span class="p">]</span><span class="o">.</span><span class="n">set_image</span><span class="p">(</span><span class="n">ico</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">label</span><span class="p">]</span><span class="o">.</span><span class="n">set_image_position</span><span class="p">(</span><span class="n">gtk</span><span class="o">.</span><span class="n">POS_TOP</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">hboxes</span><span class="p">[</span><span class="n">boxIndex</span><span class="p">]</span><span class="o">.</span><span class="n">pack_start</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">label</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">label</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;clicked&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">callback</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span>
    <span class="n">c</span> <span class="o">+=</span> <span class="mi">1</span> 
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">c</span> <span class="o">%</span> <span class="mi">3</span><span class="p">):</span>
        <span class="n">boxIndex</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div>


<p lang="en">And now, let's pack the horizontal boxes inside the vertical box and the vertical box inside our window. Do <strong>not</strong> forget to show all our widgets with self.show_all().</p>
<p lang="el">Και τώρα, ας πακετάρουμε τα οριζόντια κουτιά μέσα στο κάθετο κουτί και το κάθετο κουτί μέσα στο παράθυρό μας. <strong>Μην</strong> ξεχάσετε να εμφανίσετε όλα τα γραφικά στοιχεία σας με την self.show_all().</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span></span><span class="k">for</span> <span class="n">hbox</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hboxes</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vbox</span><span class="o">.</span><span class="n">pack_start</span><span class="p">(</span><span class="n">hbox</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vbox</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>
</code></pre></div>


<p lang="en">Finally, we connect some more events with their callback handlers:</p> 
<p lang="el">Τέλος, συνδέουμε μερικά ακόμη συμβάντα με τους επανακαλούμενους χειριστές τους:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span></span><span class="c1">#If our window is destroyed call self.callback (to exit)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;delete-event&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">callback</span><span class="p">)</span>
<span class="c1">#If a key is pressed call self.key_press_event</span>
<span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;key-press-event&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">key_press_event</span><span class="p">)</span>
</code></pre></div>


<p lang="en">This is the our keyboard callback/event handler function. If the user has pressed <strong>Escape</strong>, we quit:</p>
<p lang="el">Αυτή είναι η επανακαλούμενη συνάρτησή μας για τον χειρισμό συμβάντων πληκτρολογίου. Αν ο χρήστης έχει πατήσει το <strong>Escape</strong>, βγαίνουμε από την εφαρμογή:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span></span><span class="k">def</span> <span class="nf">key_press_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">event</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
    <span class="n">keyval</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">keyval</span>
    <span class="n">keyval_name</span> <span class="o">=</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">keyval_name</span><span class="p">(</span><span class="n">keyval</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">keyval_name</span> <span class="o">==</span> <span class="s2">&quot;Escape&quot;</span><span class="p">:</span>
        <span class="n">gtk</span><span class="o">.</span><span class="n">main_quit</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">False</span>
</code></pre></div>


<p lang="en">If you would like to check for some key modifier/combination you can -for example- get the ctrl key status like this:</p>
<p lang="el">Αν τυχόν επιθυμείτε να ελέγξετε για κάποιο ειδικό πλήκτρο ή συνδυασμό μπορείτε -για παράδειγμα- να λάβετε την κατάσταση του πλήκτρου ctrl ως εξής:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span></span><span class="n">state</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">state</span>
<span class="n">ctrl</span> <span class="o">=</span> <span class="p">(</span><span class="n">state</span> <span class="o">&amp;</span> <span class="n">gtk</span><span class="o">.</span><span class="n">gdk</span><span class="o">.</span><span class="n">CONTROL_MASK</span><span class="p">)</span>
</code></pre></div>


<p lang="en">This is the our generic callback function which executes the commands:</p>
<p lang="el">Αυτή είναι η γενική μας επανακαλούμενη συνάρτηση που εκτελεί τις εντολές:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span></span><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> 
       <span class="n">data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="ow">and</span> 
       <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">data</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">data</span><span class="p">])</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">main_quit</span><span class="p">()</span>
</code></pre></div>


<p lang="en">When our program executes, an <em>SystemDialog</em> object is created and gtk.main() is called:</p>
<p lang="el">Όταν η εφαρμογή μας εκτελείται, δημιουργείται ένα αντικείμενο <em>SystemDialog</em> και καλείται η gtk.main():</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span></span><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">SystemDialog</span><span class="p">()</span>
    <span class="n">gtk</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</code></pre></div>


<p lang="en"><strong>Last but not least</strong>: In order for our program to function without having to ask for a password, you need to <strong>add</strong> some lines in your <em>/etc/sudoers</em> file. This is a special system file and you have to run <em>visudo</em> with root privileges to edit it:</p>
<p lang="el"><strong>Σημαντικό</strong>: Προκειμένου η εφαρμογή μας να λειτουργεί χωρίς να χρειάζεται να ζητάει κωδικό, θα πρέπει να <strong>προσθέσετε</strong> μερικές γραμμές στο αρχείο <em>/etc/sudoers</em>. Πρόκειται για ένα ειδικό αρχείο του συστήματος το οποίο, για να το διορθώσετε, θα πρέπει να τρέξετε την εντολή <em>visudo</em> έχοντας δικαιώματα διαχειριστή:</p>

<div class="bg-black"> 
<div class="highlight"><pre><code class="language-shell" data-lang="shell"><span></span><span class="c1"># visudo</span>
username <span class="nv">ALL</span><span class="o">=(</span>root<span class="o">)</span> NOPASSWD: /sbin/reboot
username <span class="nv">ALL</span><span class="o">=(</span>root<span class="o">)</span> NOPASSWD: /sbin/poweroff
username <span class="nv">ALL</span><span class="o">=(</span>root<span class="o">)</span> NOPASSWD: /usr/bin/killall
username <span class="nv">ALL</span><span class="o">=(</span>root<span class="o">)</span> NOPASSWD: /usr/sbin/pm-suspend
username <span class="nv">ALL</span><span class="o">=(</span>root<span class="o">)</span> NOPASSWD: /usr/sbin/pm-suspend-hybrid
username <span class="nv">ALL</span><span class="o">=(</span>root<span class="o">)</span> NOPASSWD: /usr/sbin/pm-hibernate
</code></pre></div>

</div>

<h1 id="span-lang-en-source-code-span-span-lang-el-πηγαίος-κώδικας-span"><span lang="en">Source code</span><span lang="el">Πηγαίος κώδικας</span></h1>

<p lang="en">Here is the full code listing: <a href="https://github.com/Alamot/adwm/blob/master/shutdown-manager-plain" target="_blank">shutdown-manager-plain</a></p>
<p lang="el">Μπορείτε να δείτε τον πλήρη κώδικα εδώ: <a href="https://github.com/Alamot/adwm/blob/master/shutdown-manager-plain" target="_blank">shutdown-manager-plain</a></p>

        </div>

        <aside>
          <section id="shares-section">
              <div class="p-share">
                <a href="http://www.facebook.com/sharer.php?src=bm&u=https%3a%2f%2falamot.github.io%2fshutdown_manager_plain%2f&t=Creation%20of%20a%20shutdown%20GUI%20using%20Gtk%20in%20Python" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-facebook"></i></a>
                <a href="https://plus.google.com/share?url=https%3a%2f%2falamot.github.io%2fshutdown_manager_plain%2f" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-google-plus"></i></a>
                <a lang="en" href="http://twitter.com/intent/tweet?url=https%3a%2f%2falamot.github.io%2fshutdown_manager_plain%2f&text=Creation%20of%20a%20shutdown%20GUI%20using%20Gtk%20in%20Python&tw_p=tweetbutton" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-twitter"></i></a>
                <a lang="el" href="http://twitter.com/intent/tweet?url=https%3a%2f%2falamot.github.io%2fshutdown_manager_plain%2f&text=%ce%94%ce%b7%ce%bc%ce%b9%ce%bf%cf%85%cf%81%ce%b3%ce%af%ce%b1%20%ce%bc%ce%b9%ce%b1%cf%82%20%ce%b3%cf%81%ce%b1%cf%86%ce%b9%ce%ba%ce%ae%cf%82%20%ce%b4%ce%b9%ce%b5%cf%80%ce%b1%cf%86%ce%ae%cf%82%20%ce%ba%ce%bb%ce%b5%ce%b9%cf%83%ce%af%ce%bc%ce%b1%cf%84%ce%bf%cf%82%20%ce%bc%ce%b5%20%cf%84%ce%b7%20%cf%87%cf%81%ce%ae%cf%83%ce%b7%20Gtk%20%cf%83%ce%b5%20Python&tw_p=tweetbutton" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-twitter"></i></a>
                <a lang="en" href="http://pinterest.com/pin/create/link/?url==https%3a%2f%2falamot.github.io%2fshutdown_manager_plain%2f&description=Creation%20of%20a%20shutdown%20GUI%20using%20Gtk%20in%20Python&media=https://alamot.github.io/images/shutdown_button.jpg" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-pinterest-p"></i></a>
                <a lang="el" href="http://pinterest.com/pin/create/link/?url==https%3a%2f%2falamot.github.io%2fshutdown_manager_plain%2f&description=%ce%94%ce%b7%ce%bc%ce%b9%ce%bf%cf%85%cf%81%ce%b3%ce%af%ce%b1%20%ce%bc%ce%b9%ce%b1%cf%82%20%ce%b3%cf%81%ce%b1%cf%86%ce%b9%ce%ba%ce%ae%cf%82%20%ce%b4%ce%b9%ce%b5%cf%80%ce%b1%cf%86%ce%ae%cf%82%20%ce%ba%ce%bb%ce%b5%ce%b9%cf%83%ce%af%ce%bc%ce%b1%cf%84%ce%bf%cf%82%20%ce%bc%ce%b5%20%cf%84%ce%b7%20%cf%87%cf%81%ce%ae%cf%83%ce%b7%20Gtk%20%cf%83%ce%b5%20Python&media=https://alamot.github.io/images/shutdown_button.jpg" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-pinterest-p"></i></a>
              </div>
          </section>
          
          <section id="comments-section" class="center">
           <div lang="en">
            <script>
             email("<div class='csstooltip'><span class='badge badge-info'>?</span><span class='tooltiptext'>Comments will be visible after approval. Your e-mail address will NOT appear on this site.</span></div><a class='btn btn-warning' href='mailto", "gmail.com", "antonios", "tsolis", "Comment 3184b5c935677bdf6928b5555fbb6d02", "Comment on «Creation of a shutdown GUI using Gtk in Python»%0D%0Aby __Anonymous__ (<--You can put a display name here, since your e-mail address will NOT appear on the site.)%0D%0A%0D%0A*** DO NOT DELETE THE ABOVE LINES. WRITE YOUR COMMENT BELOW ***.%0D%0A%0D%0A%0D%0A","<i class='fa fa-envelope' aria-hidden='true'></i> Comment via e-mail </a>");
            </script>
           </div>
           <div lang="el">
            <script>
             email("<div class='csstooltip'><span class='badge badge-info'>?</span><span class='tooltiptext'>Τα σχόλια εμφανίζονται αφότου περάσουν από έγκριση. Η διεύθυνση του η-ταχυδρομείου σας δε θα εμφανιστεί σε αυτό τον ιστότοπο.</span></div><a class='btn btn-warning' href='mailto", "gmail.com", "antonios", "tsolis", "Σχόλιο 3184b5c935677bdf6928b5555fbb6d02", "Σχόλιο στο «Δημιουργία μιας γραφικής διεπαφής κλεισίματος με τη χρήση Gtk σε Python»%0D%0Aαπό __Ανώνυμος__ (<--Μπορείτε να βάλετε ένα εμφανιζόμενο όνομα χρήστη εδώ, μιας και η διεύθυνση του η-ταχυδρομείου σας δε θα φαίνεται στον ιστότοπο.)%0D%0A%0D%0A*** ΜΗ ΔΙΑΓΡΑΨΕΤΕ ΤΙΣ ΠΑΡΑΠΑΝΩ ΓΡΑΜΜΕΣ. ΓΡΑΨΤΕ ΤΟ ΣΧΟΛΙΟ ΣΑΣ ΑΠΟ ΚΑΤΩ ***.%0D%0A%0D%0A%0D%0A", "<i class='fa fa-envelope' aria-hidden='true'></i> Σχολιάστε μέσω η-ταχυδρομείου</a>");
            </script>
           </div>
          </section>
        </aside>
      </article>

      
      <section id="posts-section">
        <header lang="en">See also...</header>
        <header lang="el">Δείτε επίσης...</header>
        <div>
         
         
         
          
           
           
           
            <article class="li col-md-4">
  <a href="https://alamot.github.io/test_encodings/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/encodings.jpg);"></div>
    </div>
    <footer>
      <h2 class="title" lang="en">How to determine the character encoding of a text file</h2>
      <h2 class="title" lang="el">Πως να αναγνωρίσετε την κωδικοποίηση χαρακτήρων ενός αρχείου κειμένου</h2>
      <i class="fa fa-calendar"></i>&nbsp;<time lang="en">2016-10-21</time><time lang="el">2016-10-21</time>
    </footer>
  </a>
</article>

           
          
           
           
           
            <article class="li col-md-4">
  <a href="https://alamot.github.io/fast_commit_push/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/binary_flow.jpg);"></div>
    </div>
    <footer>
      <h2 class="title" lang="en">Git &amp; Mercurial: How to commit-push fast and easily</h2>
      <h2 class="title" lang="el">Git &amp; Mercurial: Πως να κάνετε commit-push γρήγορα και εύκολα</h2>
      <i class="fa fa-calendar"></i>&nbsp;<time lang="en">2016-10-17</time><time lang="el">2016-10-17</time>
    </footer>
  </a>
</article>

           
          
           
           
           
            <article class="li col-md-4">
  <a href="https://alamot.github.io/nl80211/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/wifi-sign.jpg);"></div>
    </div>
    <footer>
      <h2 class="title" lang="en">How to get info for the wireless interface using nl80211 in C</h2>
      <h2 class="title" lang="el">Πως να λάβετε πληροφορίες για την ασύρματη διεπαφή χρησιμοποιώντας την nl80211 στη C</h2>
      <i class="fa fa-calendar"></i>&nbsp;<time lang="en">2016-10-09</time><time lang="el">2016-10-09</time>
    </footer>
  </a>
</article>

           
          
           
           
           
            <article class="li col-md-4">
  <a href="https://alamot.github.io/shutdown_manager_transparent/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/transparent_shutdown.jpg);"></div>
    </div>
    <footer>
      <h2 class="title" lang="en">Creation of a transparent shutdown GUI using Gtk and Cairo in Python</h2>
      <h2 class="title" lang="el">Δημιουργία μιας διαφανούς γραφικής διεπαφής κλεισίματος με τη χρήση Gtk και Cairo σε Python</h2>
      <i class="fa fa-calendar"></i>&nbsp;<time lang="en">2016-09-19</time><time lang="el">2016-09-19</time>
    </footer>
  </a>
</article>

           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
            <article class="li col-md-4">
  <a href="https://alamot.github.io/kivy_popup/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/kivy.jpg);"></div>
    </div>
    <footer>
      <h2 class="title" lang="en">How to build a responsive popup window with scrolling capability in Kivy</h2>
      <h2 class="title" lang="el">Πώς να φτιάξετε ένα ευέλικτο αναδυόμενο παράθυρο με δυνατότητα κύλισης στην Kivy</h2>
      <i class="fa fa-calendar"></i>&nbsp;<time lang="en">2014-02-19</time><time lang="el">2014-02-19</time>
    </footer>
  </a>
</article>

           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
        </div>
      </section>
      
    </div>
   </div> 
  </div>


<footer class="l-footer">
  <span class="copyleft">&copy;</span>
  <span lang="en">2016 Antonios Tsolis</span>
  <span lang="el">2016 Αντώνιος Τσώλης</span>
  <script>
   email("<a class='mymail' href='mailto", "gmail.com", "antonios", "tsolis", "", "","<i class='fa fa-envelope-o' aria-hidden='true'></i></a>");
  </script>
</footer>

<script src="https://alamot.github.io/js/jquery.min.js"></script>
<script src="https://alamot.github.io/js/bootstrap.min.js"></script>
<script src="https://alamot.github.io/js/moment.min.js"></script>
<script src="https://alamot.github.io/js/el.min.js"></script>
<script src="https://alamot.github.io/js/lunr.min.js"></script>
<script src="https://alamot.github.io/js/custom.min.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']], }
  });
</script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>

<script>
langtext = "English";
language = localStorage.getItem('language');
$(document).ready(function(){
  if (language) {
    document.getElementById('mainbody').setAttribute('class', language);
    document.getElementById('mainbody').setAttribute('lang', language);
    if (language == 'el') { langtext="Ελληνικά"; }
    $("#language-selector").parents('.btn-group').find('.dropdown-toggle').html(langtext+' <span class="caret"></span>');
  }

  $("#language-selector li a").click(function(){
    var langid = this.id;
    var selText = this.text;
    document.getElementById('mainbody').setAttribute('class', langid);
    document.getElementById('mainbody').setAttribute('lang', langid);
    localStorage.setItem('language', langid);
    $(this).parents('.btn-group').find('.dropdown-toggle').html(selText+' <span class="caret"></span>');
  });

  $('time').each(function(){
    d = $(this).text();
    $(this).text(moment(d).locale(this.lang).format("ll")); 
  });

  $("#TableOfContents a, #content-selector a").on('click', function(e) {
    
    e.preventDefault();

    
    var hash = this.hash;
    console.log(hash);

    
    $('html, body').animate({scrollTop: $(hash).offset().top}, 1300, function(){
      
      
      window.location.hash = hash;
    });
  });
  
  var lunrIndex, lunrStore;
  $.getJSON('https:\/\/alamot.github.io\/json/search.json', function (data) {
    lunrStore = data.store;  
    lunr.Pipeline.registerFunction(trimmer_all, 'trimmer_all')
    lunr.Pipeline.registerFunction(stopwordfilter_el, 'stopwordfilter_el');
    lunr.Pipeline.registerFunction(stemmer_el, 'stemmer_el');
    lunrIndex = lunr.Index.load(data.index);
    results_section = jQuery("#results-section");
    results_div = jQuery("#results-section>div");
    $("#search-section").show();
    $("#search-field").keyup(function() {
      var query = $(this).val();
      if (query.length < 3) { results_section.hide(); return; }
      var results = lunrIndex.search(query);
      results_div.empty(); results_section.show();      
      if (results.length == 0) {
        results_div.append("<h3 lang='en'>Νο results found.</h3><h3 lang='el'>Δεν βρέθηκαν αποτελέσματα.</h3>");
      } else {
        results.slice(0, 10).forEach(function(result) {
          results_div.append("<article class='li col-md-4'><a href='https:\/\/alamot.github.io\/"+result.ref+"' class='clearfix'><div class='cell'><div class='image' style='background-image:url(https:\/\/alamot.github.io\/images/"+lunrStore[result.ref].image+");'></div></div><footer><h2 class='title' lang='en'>"+lunrStore[result.ref]['title']+"</h2><h2 class='title' lang='el'>"+lunrStore[result.ref]['τιτλος']+"</h2><i class='fa fa-calendar'></i>&nbsp;<time lang='en'>"+lunrStore[result.ref].date+"</time><time lang='el'>"+lunrStore[result.ref].date+"</time></footer></a></article>");
        });
        $('#results-section time').each(function(){
            d = $(this).text();
            $(this).text(moment(d).locale(this.lang).format("ll")); 
        });
      } 
    }); 
  }, function() {  console.log("ERROR: search.json");});
});
</script>

  </body>
</html>

