<!DOCTYPE html>
<html>
  <head>
    <script>
    function email(starting,server,firstname,lastname,subject,body,closing) {
      document.write(starting);
      document.write(":" + lastname);
      document.write("." + firstname);
      document.write("@");
      document.write(server + "?subject=" + subject + "&body=" + body + "' target='_blank'>");
      document.write(closing); }
    </script>
    <meta charset="utf-8">
    <meta name="generator" content="Hugo 0.17-DEV" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
        
    <link rel="stylesheet" href="https://alamot.github.io/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://alamot.github.io/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://alamot.github.io/css/styles.css">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://alamot.github.io/index.xml">
    
    
    
      <title>How to determine the character encoding of a text file - The Portal of Knowledge</title>
      <meta property='og:title' content="How to determine the character encoding of a text file - The Portal of Knowledge">
      <meta property="og:type" content="article">
      <meta name="description" content="If you have ever encountered a text file with gibberish characters, then you know that -many times- it is quite difficult to determine its correct character encoding. Αν έχετε βρεθεί ποτέ αντιμέτωποι με ένα αρχείο κειμένου που περιέχει ακαταλαβίστικους χαρακτήρες, τότε γνωρίζετε ότι -πολλές φορές- είναι αρκετά δύσκολο να αναγνωρίσετε ποια είναι η σωστή κωδικοποίηση των χαρακτήρων.">
      <meta property="og:description" content="If you have ever encountered a text file with gibberish characters, then you know that -many times- it is quite difficult to determine its correct character encoding. Αν έχετε βρεθεί ποτέ αντιμέτωποι με ένα αρχείο κειμένου που περιέχει ακαταλαβίστικους χαρακτήρες, τότε γνωρίζετε ότι -πολλές φορές- είναι αρκετά δύσκολο να αναγνωρίσετε ποια είναι η σωστή κωδικοποίηση των χαρακτήρων.">
      <meta property="og:image" content="https://alamot.github.io/images/encodings.jpg">
      <meta property="og:image:width" content="768" />
      <meta property="og:image:height" content="384" />
    
    <meta property="og:url" content="https://alamot.github.io/test_encodings/">


<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage":{
      "@type":"WebPage",
      "@id":"https:\/\/alamot.github.io\/"
    },
    "headline": "How to determine the character encoding of a text file |  ",
    "image": {
      "@type": "ImageObject",
      "url": "",
      "height": 700,
      "width": 700
    },
    "datePublished": "2016-10-21T00:00:00JST",
    "dateModified": "2016-10-21T00:00:00JST",
    "author": {
      "@type": "Person",
      "name": "",
      "image": "https:\/\/alamot.github.io\/images/logo.png"
    },
    "publisher": {
      "@type": "Organization",
      "name": "",
      "logo": {
        "@type": "ImageObject",
        "url": "https:\/\/alamot.github.io\/images/logo.png",
        "height": 60,
        "width": 60
      }
    },
    "description": ""
  }
</script>
</head>
<body id="mainbody" class="en" lang="en">
<nav class="navbar navbar-default navbar-fixed-top">
<div class="container-fluid">
  
   <ul class="nav nav-pills pull-left navbar-btn">
   <li>
    <div class="btn-group">
    <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span lang="en">Contents</span><span lang="el">Περιεχόμενα</span><span class="caret"></span>
    </button>
    <ul id="content-selector" class="dropdown-menu scroll-menu">
       <li><a href="#title"><span lang="en">Start</span><span lang="el">Αρχή</span></a></li>
       
       
       
       
       
        
 
<li><a href="#span-lang-en-introduction-span-span-lang-el-εισαγωγή-span"><span lang="en">Introduction</span><span lang="el">Εισαγωγή</span></a></li>
<li><a href="#span-lang-en-testing-encodings-span-span-lang-el-δοκιμάζοντας-κωδικοποίησεις-span"><span lang="en">Testing encodings</span><span lang="el">Δοκιμάζοντας κωδικοποίησεις</span></a></li>
<li><a href="#span-lang-en-source-code-span-span-lang-el-πηγαίος-κώδικας-span"><span lang="en">Source code</span><span lang="el">Πηγαίος κώδικας</span></a></li>
<li><a href="#span-lang-en-download-source-code-span-span-lang-el-κατέβασμα-πηγαίου-κώδικα-span"><span lang="en">Download source code</span><span lang="el">Κατέβασμα πηγαίου κώδικα</span></a></li>
 
 
       <li><a href="#posts-section"><span lang="en">See also</span><span lang="el">Δείτε επίσης</span></a></li>
    </ul>
    </div>
    </li>
   </ul>
  
   
  <ul class="nav nav-pills">
      <li><a class="p-logo" href="https://alamot.github.io/"><i class="fa fa-home" aria-hidden="true"></i> <span class="hidden768" lang="en">The Portal of Knowledge</span><span class="hidden768" lang="el">Η Πύλη της Γνώσης</span></a></li>
  </ul>
  
  <ul class="nav nav-pills pull-right navbar-btn"> 
    <li>
      <div class="btn-group">
      <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Language<span class="caret"></span>
    </button>
    <ul id="language-selector" class="dropdown-menu">
       <li><a id="en" href="#">English</a></li>
       <li><a id="el" href="#">Ελληνικά</a></li>
    </ul>
    </div>
    </li>  
  </ul>
</div>
</nav>


<div class="container-fluid">
  <div class="row">
    <div class="col-md-12">
      <article class="single">
        <div class="image" style="background-image: url(https://alamot.github.io/images/encodings.jpg);"></div>
        <div class="body">
          <div lang="en">
            <h1 id="title" class="title">How to determine the character encoding of a text file</h1>
            <i class="fa fa-calendar"></i>  
            <time lang="en">2016-10-21</time>
            &middot; <i class="fa fa-folder-open-o" aria-hidden="true"></i>
            
              <a class="label label-success" href='https://alamot.github.io/categories/coding'>Coding</a>
            
            &middot; <i class="fa fa-tags"></i>
            
              <a class="label label-primary" href='https://alamot.github.io/tags/encoding'>encoding</a>
            
              <a class="label label-primary" href='https://alamot.github.io/tags/python'>python</a>
            
          </div>
          <div lang="el">
            <h1 class="title">Πως να αναγνωρίσετε την κωδικοποίηση χαρακτήρων ενός αρχείου κειμένου</h1>
            <i class="fa fa-calendar"></i> 
            <time lang="el">2016-10-21</time>
            &middot; <i class="fa fa-folder-open-o" aria-hidden="true"></i>
            
              <a class="label label-success" href='https://alamot.github.io/%CE%BA%CE%B1%CF%84%CE%B7%CE%B3%CE%BF%CF%81%CE%B9%CE%B5%CF%82/%CF%80%CF%81%CE%BF%CE%B3%CF%81%CE%B1%CE%BC%CE%BC%CE%B1%CF%84%CE%B9%CF%83%CE%BC%CF%8C%CF%82'>Προγραμματισμός</a>
            
            &middot; <i class="fa fa-tags"></i>
            
              <a class="label label-primary" href='https://alamot.github.io/%CE%B5%CF%84%CE%B9%CE%BA%CE%B5%CF%84%CE%B5%CF%82/%CE%BA%CF%89%CE%B4%CE%B9%CE%BA%CE%BF%CF%80%CE%BF%CE%AF%CE%B7%CF%83%CE%B7'>κωδικοποίηση</a>
            
              <a class="label label-primary" href='https://alamot.github.io/%CE%B5%CF%84%CE%B9%CE%BA%CE%B5%CF%84%CE%B5%CF%82/python'>python</a>
            
          </div>

         
        
        

<h1 id="span-lang-en-introduction-span-span-lang-el-εισαγωγή-span"><span lang="en">Introduction</span><span lang="el">Εισαγωγή</span></h1>

<p lang="en">If you have ever encountered a text file with gibberish characters, then you know that -many times- it is quite difficult to determine its correct character encoding.</p>
<p lang="el">Αν έχετε βρεθεί ποτέ αντιμέτωποι με ένα αρχείο κειμένου που περιέχει ακαταλαβίστικους χαρακτήρες, τότε γνωρίζετε ότι -πολλές φορές- είναι αρκετά δύσκολο να αναγνωρίσετε ποια είναι η σωστή κωδικοποίηση των χαρακτήρων.</p>

<p lang="en">There is an automatic universal encoding detector for Python 2 and 3 here: <a href="https://pypi.python.org/pypi/chardet" target="_blank">https://pypi.python.org/pypi/chardet</a>.
The chardet detector comes with a command-line script which reports on the encodings of one or more files:
</p>
<p lang="el">Υπάρχει ένας εργαλείο ανίχνευσης της κωδικοποίησης για Python 2 και 3 εδώ: <a href="https://pypi.python.org/pypi/chardet" target="_blank">https://pypi.python.org/pypi/chardet</a>.
Ο ανιχνευτής chardet διαθέτει και ένα σενάριο για τη γραμμή εργαλείων που αναφέρει την πιθανή κωδικοποίηση ενός ή περισσότερων αρχείων
</p>

<div class="bg-black"> 
<div class="highlight"><pre><code class="language-console" data-lang="console"><span></span><span class="gp">$</span> chardetect sometextfile 
<span class="go">sometextfile: windows-1252 with confidence 0.5</span>
</code></pre></div>

</div>

<h1 id="span-lang-en-testing-encodings-span-span-lang-el-δοκιμάζοντας-κωδικοποίησεις-span"><span lang="en">Testing encodings</span><span lang="el">Δοκιμάζοντας κωδικοποίησεις</span></h1>

<p lang="en">Unfortunately, <em>chardetect</em> does not always find the correct encoding. For example, I had a text file with a cp737 encoding but <em>chardetect</em> predicted an IBM866 encoding for that file (with a low confidence of 0.26). For these difficult cases, I wrote a tool which decodes one line from a text file using every (?) possible character encoding and saves the results to a new utf-8 text file (same filename + an '.encodings' extension). Now, we can examine this file visually to find out the correct encoding.</p>
<p lang="el">Δυστυχώς, όμως, το <em>chardetect</em> δεν βρίσκει πάντα την σωστή κωδικοποίηση. Για παράδειγμα, είχα ένα αρχείο κειμένου με κωδικοποίηση cp737 αλλά το <em>chardetect</em> προέβλεψε μια κωδικοποίηση IBM866 για εκείνο. Για τέτοιες δύσκολες περιπτώσεις, έγραψα ένα εργαλείο το οποίο αποκωδικοποιεί μια γραμμή από ένα αρχείο κειμένου χρησιμοποιώντας όλες (;) τις δυνατές κωδικοποίησεις και αποθηκεύει τα αποτελέσματα σε ένα νέο utf-8 αρχείο κειμένου (ίδιο όνομα αρχείου + μια κατάληξη '.encodings'). Τώρα, μπορούμε να εξετάσουμε οπτικά αυτό το αρχειο και να ανακαλύψουμε τη σωστή κωδικοποίηση.</p>

<p lang="en"><b>Usage</b>: &nbsp; test_encodings.py &nbsp; filename &nbsp; [number of line to test]</p>
<p lang="el"><b>Χρήση</b>: &nbsp; test_encodings.py &nbsp; όνομα_αρχείου &nbsp; [αριθμός γραμμής προς έλεγχο]</p>

<div class="bg-black"> 
<div class="highlight"><pre><code class="language-shell-session" data-lang="shell-session"><span></span><span class="gp">$</span> test_encodings.py sometextfile 3

<span class="go">Processing line number: 3</span>
<span class="go">Writing successfully tested encodings in sometextfile.encodings</span>
<span class="go">53 out of 111 tested encodings were written.</span>

<span class="gp">$</span> cat sometextfile.encodings
</code></pre></div>

</div>

<p><img class="floatcenter" src="/images/testencodings_output.png" alt="Output of cat sometextfile.encodings" title="Output of cat sometextfile.encodings"></p>

<p lang="en">Having found the correct encoding, we can convert our text file to a different encoding using an editor (e.g. geany) or using a command-line tool (e.g. iconv):</p>
<p lang="el">Έχοντας βρει τη σωστή κωδικοποίηση, μπορούμε να μετατρέψουμε το αρχείο κειμένου μας σε μια διαφορετική κωδικοποίηση χρησιμοποιώντας έναν διορθώτη κειμένου (λ.χ. τον geany) ή κάποιο εργαλείο της γραμμής εντολών (λ.χ. το iconv):</p>

<div class="bg-black"> 
<div class="highlight"><pre><code class="language-shell-session" data-lang="shell-session"><span></span><span class="gp">$</span> iconv -f cp737 -t UTF-8 in.txt &gt; out.txt
</code></pre></div>

</div>

<h1 id="span-lang-en-source-code-span-span-lang-el-πηγαίος-κώδικας-span"><span lang="en">Source code</span><span lang="el">Πηγαίος κώδικας</span></h1>

<p lang="en">Here is the code. It runs under both Python 2 & 3:</p>
<p lang="el">Ιδού ο κώδικας. Τρέχει τόσο στην Python 2 όσο και στην Python 3:</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="kn">import</span> <span class="nn">io</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">encodings.aliases</span> <span class="kn">import</span> <span class="n">aliases</span>


<span class="n">encs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;ascii&quot;</span><span class="p">,</span>
    <span class="s2">&quot;big5&quot;</span><span class="p">,</span>
    <span class="s2">&quot;big5hkscs&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp037&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp424&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp437&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp500&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp720&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp737&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp775&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp850&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp852&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp855&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp856&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp857&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp858&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp860&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp861&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp862&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp863&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp864&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp865&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp866&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp869&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp874&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp875&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp932&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp949&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp950&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp1006&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp1026&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp1140&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp1250&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp1251&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp1252&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp1253&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp1254&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp1255&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp1256&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp1257&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cp1258&quot;</span><span class="p">,</span>
    <span class="s2">&quot;euc_jp&quot;</span><span class="p">,</span>
    <span class="s2">&quot;euc_jis_2004&quot;</span><span class="p">,</span>
    <span class="s2">&quot;euc_jisx0213&quot;</span><span class="p">,</span>
    <span class="s2">&quot;euc_kr&quot;</span><span class="p">,</span>
    <span class="s2">&quot;gb2312&quot;</span><span class="p">,</span>
    <span class="s2">&quot;gbk&quot;</span><span class="p">,</span>
    <span class="s2">&quot;gb18030&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hz&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iso2022_jp&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iso2022_jp_1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iso2022_jp_2&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iso2022_jp_2004&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iso2022_jp_3&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iso2022_jp_ext&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iso2022_kr&quot;</span><span class="p">,</span>
    <span class="s2">&quot;latin_1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iso8859_2&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iso8859_3&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iso8859_4&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iso8859_5&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iso8859_6&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iso8859_7&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iso8859_8&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iso8859_9&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iso8859_10&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iso8859_13&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iso8859_14&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iso8859_15&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iso8859_16&quot;</span><span class="p">,</span>
    <span class="s2">&quot;johab&quot;</span><span class="p">,</span>
    <span class="s2">&quot;koi8_r&quot;</span><span class="p">,</span>
    <span class="s2">&quot;koi8_u&quot;</span><span class="p">,</span>
    <span class="s2">&quot;mac_cyrillic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;mac_greek&quot;</span><span class="p">,</span>
    <span class="s2">&quot;mac_iceland&quot;</span><span class="p">,</span>
    <span class="s2">&quot;mac_latin2&quot;</span><span class="p">,</span>
    <span class="s2">&quot;mac_roman&quot;</span><span class="p">,</span>
    <span class="s2">&quot;mac_turkish&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ptcp154&quot;</span><span class="p">,</span>
    <span class="s2">&quot;shift_jis&quot;</span><span class="p">,</span>
    <span class="s2">&quot;shift_jis_2004&quot;</span><span class="p">,</span>
    <span class="s2">&quot;shift_jisx0213&quot;</span><span class="p">,</span>
    <span class="s2">&quot;utf_32&quot;</span><span class="p">,</span>
    <span class="s2">&quot;utf_32_be&quot;</span><span class="p">,</span>
    <span class="s2">&quot;utf_32_le&quot;</span><span class="p">,</span>
    <span class="s2">&quot;utf_16&quot;</span><span class="p">,</span>
    <span class="s2">&quot;utf_16_be&quot;</span><span class="p">,</span>
    <span class="s2">&quot;utf_16_le&quot;</span><span class="p">,</span>
    <span class="s2">&quot;utf_7&quot;</span><span class="p">,</span>
    <span class="s2">&quot;utf_8&quot;</span><span class="p">,</span>
    <span class="s2">&quot;utf_8_sig&quot;</span><span class="p">,</span>
    <span class="s2">&quot;idna&quot;</span><span class="p">,</span>
    <span class="s2">&quot;mbcs&quot;</span><span class="p">,</span>
    <span class="s2">&quot;palmos&quot;</span><span class="p">,</span>
    <span class="s2">&quot;punycode&quot;</span><span class="p">,</span>
    <span class="s2">&quot;raw_unicode_escape&quot;</span><span class="p">,</span>
    <span class="s2">&quot;rot_13&quot;</span><span class="p">,</span>
    <span class="s2">&quot;undefined&quot;</span><span class="p">,</span>
    <span class="s2">&quot;unicode_escape&quot;</span><span class="p">,</span>
    <span class="s2">&quot;unicode_internal&quot;</span><span class="p">,</span>
    <span class="s2">&quot;base64_codec&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bz2_codec&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hex_codec&quot;</span><span class="p">,</span>
    <span class="s2">&quot;uu_codec&quot;</span><span class="p">,</span>
    <span class="s2">&quot;zlib_codec&quot;</span>
<span class="p">}</span>


<span class="k">def</span> <span class="nf">write_encodings</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">line_number</span><span class="p">,</span> <span class="n">final_encoding</span><span class="p">):</span>
    <span class="c1"># To ensure that we cover as many as possible encodings,</span>
    <span class="c1"># we take the union between our predefined encoding set and the</span>
    <span class="c1"># set of the values from the encodings.aliases.aliases.</span>
    <span class="n">encodings</span> <span class="o">=</span> <span class="n">encs</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">aliases</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>

    <span class="n">data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

    <span class="c1"># Read line from file</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="n">line_number</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Processing line number: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">line_number</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s2">&quot;!!!Warning!!!: Possible empty line.&quot;</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">err</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Error reading &quot;</span> <span class="o">+</span> <span class="n">filename</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Decode it using every possible encoding</span>
    <span class="k">for</span> <span class="n">enc</span> <span class="ow">in</span> <span class="n">encodings</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="n">enc</span><span class="p">]</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">enc</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">err</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Cannot decode using &quot;</span> <span class="o">+</span> <span class="n">enc</span><span class="p">)</span>
            <span class="c1"># print(err)</span>

    <span class="c1"># We write the results in a new utf-8 text file</span>
    <span class="c1"># We use the same filename + an &#39;.encodings&#39; extension</span>
    <span class="n">fpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">newfilename</span> <span class="o">=</span> <span class="n">fpath</span> <span class="o">+</span> <span class="s1">&#39;.encodings&#39;</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Writing successfully tested encodings in &quot;</span> <span class="o">+</span> <span class="n">newfilename</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">newfilename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">out</span><span class="p">:</span>
        <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">enc</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%-20s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">enc</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">):</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">enc</span><span class="p">]</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">final_encoding</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">enc</span><span class="p">]</span>
                <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">)</span>
                <span class="n">c</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">_</span><span class="p">,</span> <span class="n">err</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
                <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Cannot encode &quot;</span> <span class="o">+</span> <span class="n">enc</span> <span class="o">+</span> <span class="s2">&quot; to &quot;</span> <span class="o">+</span> <span class="n">final_encoding</span><span class="p">)</span>
                <span class="c1"># print(err)</span>

    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; out of &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">encodings</span><span class="p">))</span> <span class="o">+</span>
          <span class="s2">&quot; tested encodings were written.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">nargs</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
    <span class="k">if</span> <span class="n">nargs</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">nargs</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="nb">exit</span><span class="p">(</span><span class="s2">&quot;Usage: test_encodings.py filename [number of line to test]&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">nargs</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">line_number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">line_number</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">write_encodings</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">line_number</span><span class="p">,</span> <span class="s1">&#39;utf_8&#39;</span><span class="p">)</span>
</code></pre></div>


<h1 id="span-lang-en-download-source-code-span-span-lang-el-κατέβασμα-πηγαίου-κώδικα-span"><span lang="en">Download source code</span><span lang="el">Κατέβασμα πηγαίου κώδικα</span></h1>

<p lang="en">You can download the full code listing here: <a href="https://github.com/Alamot/code-snippets/blob/master/encodings/test_encodings.py" target="_blank">test_encodings.py</a></p>
<p lang="el">Μπορείτε να κατεβάσετε τον πλήρη κώδικα από εδώ: <a href="https://github.com/Alamot/code-snippets/blob/master/encodings/test_encodings.py" target="_blank">test_encodings.py</a></p>

        </div>

        <aside>
          <section id="shares-section">
              <div class="p-share">
                <a href="http://www.facebook.com/sharer.php?src=bm&u=https%3a%2f%2falamot.github.io%2ftest_encodings%2f&t=How%20to%20determine%20the%20character%20encoding%20of%20a%20text%20file" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-facebook"></i></a>
                <a href="https://plus.google.com/share?url=https%3a%2f%2falamot.github.io%2ftest_encodings%2f" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-google-plus"></i></a>
                <a lang="en" href="http://twitter.com/intent/tweet?url=https%3a%2f%2falamot.github.io%2ftest_encodings%2f&text=How%20to%20determine%20the%20character%20encoding%20of%20a%20text%20file&tw_p=tweetbutton" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-twitter"></i></a>
                <a lang="el" href="http://twitter.com/intent/tweet?url=https%3a%2f%2falamot.github.io%2ftest_encodings%2f&text=%ce%a0%cf%89%cf%82%20%ce%bd%ce%b1%20%ce%b1%ce%bd%ce%b1%ce%b3%ce%bd%cf%89%cf%81%ce%af%cf%83%ce%b5%cf%84%ce%b5%20%cf%84%ce%b7%ce%bd%20%ce%ba%cf%89%ce%b4%ce%b9%ce%ba%ce%bf%cf%80%ce%bf%ce%af%ce%b7%cf%83%ce%b7%20%cf%87%ce%b1%cf%81%ce%b1%ce%ba%cf%84%ce%ae%cf%81%cf%89%ce%bd%20%ce%b5%ce%bd%cf%8c%cf%82%20%ce%b1%cf%81%cf%87%ce%b5%ce%af%ce%bf%cf%85%20%ce%ba%ce%b5%ce%b9%ce%bc%ce%ad%ce%bd%ce%bf%cf%85&tw_p=tweetbutton" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-twitter"></i></a>
                <a lang="en" href="http://pinterest.com/pin/create/link/?url==https%3a%2f%2falamot.github.io%2ftest_encodings%2f&description=How%20to%20determine%20the%20character%20encoding%20of%20a%20text%20file&media=https://alamot.github.io/images/encodings.jpg" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-pinterest-p"></i></a>
                <a lang="el" href="http://pinterest.com/pin/create/link/?url==https%3a%2f%2falamot.github.io%2ftest_encodings%2f&description=%ce%a0%cf%89%cf%82%20%ce%bd%ce%b1%20%ce%b1%ce%bd%ce%b1%ce%b3%ce%bd%cf%89%cf%81%ce%af%cf%83%ce%b5%cf%84%ce%b5%20%cf%84%ce%b7%ce%bd%20%ce%ba%cf%89%ce%b4%ce%b9%ce%ba%ce%bf%cf%80%ce%bf%ce%af%ce%b7%cf%83%ce%b7%20%cf%87%ce%b1%cf%81%ce%b1%ce%ba%cf%84%ce%ae%cf%81%cf%89%ce%bd%20%ce%b5%ce%bd%cf%8c%cf%82%20%ce%b1%cf%81%cf%87%ce%b5%ce%af%ce%bf%cf%85%20%ce%ba%ce%b5%ce%b9%ce%bc%ce%ad%ce%bd%ce%bf%cf%85&media=https://alamot.github.io/images/encodings.jpg" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-pinterest-p"></i></a>
              </div>
          </section>
          
          <section id="comments-section" class="center">
           <div lang="en">
            <script>
             email("<div class='csstooltip'><span class='badge badge-info'>?</span><span class='tooltiptext'>Comments will be visible after approval. Your e-mail address will NOT appear on this site.</span></div><a class='btn btn-warning' href='mailto", "gmail.com", "antonios", "tsolis", "Comment 9aa01cc3d2b7929659fdb6b8f3fab43f", "Comment on «How to determine the character encoding of a text file»%0D%0Aby __Anonymous__ (<--You can put a display name here, since your e-mail address will NOT appear on the site.)%0D%0A%0D%0A*** DO NOT DELETE THE ABOVE LINES. WRITE YOUR COMMENT BELOW ***.%0D%0A%0D%0A%0D%0A","<i class='fa fa-envelope' aria-hidden='true'></i> Comment via e-mail </a>");
            </script>
           </div>
           <div lang="el">
            <script>
             email("<div class='csstooltip'><span class='badge badge-info'>?</span><span class='tooltiptext'>Τα σχόλια εμφανίζονται αφότου περάσουν από έγκριση. Η διεύθυνση του η-ταχυδρομείου σας δε θα εμφανιστεί σε αυτό τον ιστότοπο.</span></div><a class='btn btn-warning' href='mailto", "gmail.com", "antonios", "tsolis", "Σχόλιο 9aa01cc3d2b7929659fdb6b8f3fab43f", "Σχόλιο στο «Πως να αναγνωρίσετε την κωδικοποίηση χαρακτήρων ενός αρχείου κειμένου»%0D%0Aαπό __Ανώνυμος__ (<--Μπορείτε να βάλετε ένα εμφανιζόμενο όνομα χρήστη εδώ, μιας και η διεύθυνση του η-ταχυδρομείου σας δε θα φαίνεται στον ιστότοπο.)%0D%0A%0D%0A*** ΜΗ ΔΙΑΓΡΑΨΕΤΕ ΤΙΣ ΠΑΡΑΠΑΝΩ ΓΡΑΜΜΕΣ. ΓΡΑΨΤΕ ΤΟ ΣΧΟΛΙΟ ΣΑΣ ΑΠΟ ΚΑΤΩ ***.%0D%0A%0D%0A%0D%0A", "<i class='fa fa-envelope' aria-hidden='true'></i> Σχολιάστε μέσω η-ταχυδρομείου</a>");
            </script>
           </div>
          </section>
        </aside>
      </article>

      
      <section id="posts-section">
        <header lang="en">See also...</header>
        <header lang="el">Δείτε επίσης...</header>
        <div>
         
         
         
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
            <article class="li col-md-4">
  <a href="https://alamot.github.io/shutdown_manager_transparent/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/transparent_shutdown.jpg);"></div>
    </div>
    <footer>
      <h2 class="title" lang="en">Creation of a transparent shutdown GUI using Gtk and Cairo in Python</h2>
      <h2 class="title" lang="el">Δημιουργία μιας διαφανούς γραφικής διεπαφής κλεισίματος με τη χρήση Gtk και Cairo σε Python</h2>
      <i class="fa fa-calendar"></i>&nbsp;<time lang="en">2016-09-19</time><time lang="el">2016-09-19</time>
    </footer>
  </a>
</article>

           
          
           
           
           
          
           
           
           
            <article class="li col-md-4">
  <a href="https://alamot.github.io/shutdown_manager_plain/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/shutdown_button.jpg);"></div>
    </div>
    <footer>
      <h2 class="title" lang="en">Creation of a shutdown GUI using Gtk in Python</h2>
      <h2 class="title" lang="el">Δημιουργία μιας γραφικής διεπαφής κλεισίματος με τη χρήση Gtk σε Python</h2>
      <i class="fa fa-calendar"></i>&nbsp;<time lang="en">2016-07-21</time><time lang="el">2016-07-21</time>
    </footer>
  </a>
</article>

           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
            <article class="li col-md-4">
  <a href="https://alamot.github.io/kivy_popup/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/kivy.jpg);"></div>
    </div>
    <footer>
      <h2 class="title" lang="en">How to build a responsive popup window with scrolling capability in Kivy</h2>
      <h2 class="title" lang="el">Πώς να φτιάξετε ένα ευέλικτο αναδυόμενο παράθυρο με δυνατότητα κύλισης στην Kivy</h2>
      <i class="fa fa-calendar"></i>&nbsp;<time lang="en">2014-02-19</time><time lang="el">2014-02-19</time>
    </footer>
  </a>
</article>

           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
           
           
           
          
          
           
           
           
           
          
           
           
           
           
            <article class="li col-md-4">
  <a href="https://alamot.github.io/fast_commit_push/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/binary_flow.jpg);"></div>
    </div>
    <footer>
      <h2 class="title" lang="en">Git &amp; Mercurial: How to commit-push fast and easily</h2>
      <h2 class="title" lang="el">Git &amp; Mercurial: Πως να κάνετε commit-push γρήγορα και εύκολα</h2>
      <i class="fa fa-calendar"></i>&nbsp;<time lang="en">2016-10-17</time><time lang="el">2016-10-17</time>
    </footer>
  </a>
</article>

           
          
           
           
           
           
            <article class="li col-md-4">
  <a href="https://alamot.github.io/nl80211/" class="clearfix">
    <div class="cell">
      <div class="image" style="background-image: url(https://alamot.github.io/images/wifi-sign.jpg);"></div>
    </div>
    <footer>
      <h2 class="title" lang="en">How to get info for the wireless interface using nl80211 in C</h2>
      <h2 class="title" lang="el">Πως να λάβετε πληροφορίες για την ασύρματη διεπαφή χρησιμοποιώντας την nl80211 στη C</h2>
      <i class="fa fa-calendar"></i>&nbsp;<time lang="en">2016-10-09</time><time lang="el">2016-10-09</time>
    </footer>
  </a>
</article>

           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
           
           
           
           
          
        </div>
      </section>
      
    </div>
   </div> 
  </div>


<footer class="l-footer">
  <span class="copyleft">&copy;</span>
  <span lang="en">2016 Antonios Tsolis</span>
  <span lang="el">2016 Αντώνιος Τσώλης</span>
  <script>
   email("<a class='mymail' href='mailto", "gmail.com", "antonios", "tsolis", "", "","<i class='fa fa-envelope-o' aria-hidden='true'></i></a>");
  </script>
</footer>

<script src="https://alamot.github.io/js/jquery.min.js"></script>
<script src="https://alamot.github.io/js/bootstrap.min.js"></script>
<script src="https://alamot.github.io/js/moment.min.js"></script>
<script src="https://alamot.github.io/js/el.min.js"></script>
<script src="https://alamot.github.io/js/lunr.min.js"></script>
<script src="https://alamot.github.io/js/custom.min.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']], }
  });
</script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>

<script>
langtext = "English";
language = localStorage.getItem('language');
$(document).ready(function(){
  if (language) {
    document.getElementById('mainbody').setAttribute('class', language);
    document.getElementById('mainbody').setAttribute('lang', language);
    if (language == 'el') { langtext="Ελληνικά"; }
    $("#language-selector").parents('.btn-group').find('.dropdown-toggle').html(langtext+' <span class="caret"></span>');
  }

  $("#language-selector li a").click(function(){
    var langid = this.id;
    var selText = this.text;
    document.getElementById('mainbody').setAttribute('class', langid);
    document.getElementById('mainbody').setAttribute('lang', langid);
    localStorage.setItem('language', langid);
    $(this).parents('.btn-group').find('.dropdown-toggle').html(selText+' <span class="caret"></span>');
  });

  $('time').each(function(){
    d = $(this).text();
    $(this).text(moment(d).locale(this.lang).format("ll")); 
  });

  $("#TableOfContents a, #content-selector a").on('click', function(e) {
    
    e.preventDefault();

    
    var hash = this.hash;
    console.log(hash);

    
    $('html, body').animate({scrollTop: $(hash).offset().top}, 1300, function(){
      
      
      window.location.hash = hash;
    });
  });
  
  var lunrIndex, lunrStore;
  $.getJSON('https:\/\/alamot.github.io\/json/search.json', function (data) {
    lunrStore = data.store;  
    lunr.Pipeline.registerFunction(trimmer_all, 'trimmer_all')
    lunr.Pipeline.registerFunction(stopwordfilter_el, 'stopwordfilter_el');
    lunr.Pipeline.registerFunction(stemmer_el, 'stemmer_el');
    lunrIndex = lunr.Index.load(data.index);
    results_section = jQuery("#results-section");
    results_div = jQuery("#results-section>div");
    $("#search-section").show();
    $("#search-field").keyup(function() {
      var query = $(this).val();
      if (query.length < 3) { results_section.hide(); return; }
      var results = lunrIndex.search(query);
      results_div.empty(); results_section.show();      
      if (results.length == 0) {
        results_div.append("<h3 lang='en'>Νο results found.</h3><h3 lang='el'>Δεν βρέθηκαν αποτελέσματα.</h3>");
      } else {
        results.slice(0, 10).forEach(function(result) {
          results_div.append("<article class='li col-md-4'><a href='https:\/\/alamot.github.io\/"+result.ref+"' class='clearfix'><div class='cell'><div class='image' style='background-image:url(https:\/\/alamot.github.io\/images/"+lunrStore[result.ref].image+");'></div></div><footer><h2 class='title' lang='en'>"+lunrStore[result.ref]['title']+"</h2><h2 class='title' lang='el'>"+lunrStore[result.ref]['τιτλος']+"</h2><i class='fa fa-calendar'></i>&nbsp;<time lang='en'>"+lunrStore[result.ref].date+"</time><time lang='el'>"+lunrStore[result.ref].date+"</time></footer></a></article>");
        });
        $('#results-section time').each(function(){
            d = $(this).text();
            $(this).text(moment(d).locale(this.lang).format("ll")); 
        });
      } 
    }); 
  }, function() {  console.log("ERROR: search.json");});
});
</script>

  </body>
</html>

